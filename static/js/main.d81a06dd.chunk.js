(this["webpackJsonpd2-photo-editor"]=this["webpackJsonpd2-photo-editor"]||[]).push([[0],{398:function(e,t,n){},471:function(e,t,n){},472:function(e,t,n){},473:function(e,t,n){},500:function(e,t,n){},501:function(e,t,n){},502:function(e,t,n){},503:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){},508:function(e,t,n){},509:function(e,t,n){},510:function(e,t,n){},605:function(e,t,n){},606:function(e,t,n){},608:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getComponentNodeByFiberNode",(function(){return ge}));var r=n(79),s=n.n(r),o=n(0),i=n(1),l=n(4),c=n(5),d=n(3),h=n.n(d),u=n(84),p=n(390),v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:[]};Object(o.a)(this,e),this.dsl={page:[]},Object(u.m)(this,{dsl:u.n,setDSL:u.f}),this.dsl=t}return Object(i.a)(e,[{key:"setDSL",value:function(e){this.dsl=e}},{key:"getDSLById",value:function(e){}},{key:"setDSLById",value:function(e,t){}},{key:"setDSLPropValueById",value:function(e,t,n){}},{key:"getDSLPropValueById",value:function(e,t){}},{key:"delPageDsl",value:function(e){var t,n=(null===(t=this.dsl)||void 0===t?void 0:t.page)||[];this._delPageDsl(n,e)}},{key:"_delPageDsl",value:function(e,t){for(var n=0;n<(null===e||void 0===e?void 0:e.length);n++){var a=e[n];if((null===a||void 0===a?void 0:a.id)==t)return e.splice(n,1)[0];if(Array.isArray(a.children)){var r=this._delPageDsl(a.children,t);if(r)return r}}}},{key:"addPageDSL",value:function(e){var t,n={};null===(t=e.props)||void 0===t||t.map((function(e){n[e.name]=e.value}));var a={id:e.componentName+"_"+Object(p.a)(),componentName:e.componentName,props:n};return this.dsl.page.push(a),a}},{key:"getPageDSL",value:function(e){var t,n=(null===(t=this.dsl)||void 0===t?void 0:t.page)||[];return this._getPageDSL(n,e)}},{key:"_getPageDSL",value:function(e,t){for(var n=0;n<(null===e||void 0===e?void 0:e.length);n++){var a=e[n];if((null===a||void 0===a?void 0:a.id)==t)return a;if(Array.isArray(a.children)){var r=this._getPageDSL(a.children,t);if(r)return r}}}},{key:"setPageDslProp",value:function(e,t,n){var a,r=(null===(a=this.dsl)||void 0===a?void 0:a.page)||[];this._setPageDslProp(r,e,t,n)}},{key:"_setPageDslProp",value:function(e,t,n,a){for(var r=0;r<(null===e||void 0===e?void 0:e.length);r++){var s=e[r];if((null===s||void 0===s?void 0:s.id)==a)return void(s.props[t]=n);if(Array.isArray(s.children)){var o=this._setPageDslProp(s.children,t,n,a);if(o)return o}}}}]),e}(),f=v,g=n(31),m=n(28),b=n.n(m),O=n(329),j=(n(349),n(398),n(30)),x=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={dockSelectName:""},a.props.ctx.set("skeleton",Object(g.a)(a)),a.handleFloatBoxOutsideClickHiden=a.handleFloatBoxOutsideClickHiden.bind(Object(g.a)(a)),a.refLeftArea=a.leftAreaSelectItem=null,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("click",this.handleFloatBoxOutsideClickHiden,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handleFloatBoxOutsideClickHiden,!0)}},{key:"handleFloatBoxOutsideClickHiden",value:function(e){var t,n;null!==(t=this.refLeftArea)&&void 0!==t&&t.contains(e.target)||"float"==(null===(n=this.leftAreaSelectItem)||void 0===n?void 0:n.boxType)&&this.handleDockItemOnSelect()}},{key:"renderTopArea",value:function(){var e=this.props,t=e.topArea,n=e.ctx,a=[],r=[],s=[];return t.map((function(e){!e.hidden&&h.a.isValidElement(e.content)&&("left"!==e.align&&e.align?"center"===e.align?s.push(e):"right"===e.align&&r.push(e):a.push(e))})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"skeleton-top-area-left",children:a.map((function(e,t){return h.a.cloneElement(e.content,{ctx:n,key:t})}))}),Object(j.jsx)("div",{className:"skeleton-top-area-center",children:s.map((function(e,t){return h.a.cloneElement(e.content,{ctx:n,key:t})}))}),Object(j.jsx)("div",{className:"skeleton-top-area-right",children:r.map((function(e,t){return h.a.cloneElement(e.content,{ctx:n,key:t})}))})]})}},{key:"renderLeftArea",value:function(){var e,t,n=this,a=this.props,r=a.leftArea,s=a.ctx,o=this.state.dockSelectName,i=[],l=[],c=null;return this.leftAreaSelectItem={},r.map((function(e){!e.hidden&&h.a.isValidElement(e.content)&&(e.name===o&&(c=e.content,n.leftAreaSelectItem=e),"top"!==e.align&&e.align?"bottom"===e.align&&l.push(e):i.push(e))})),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"skeleton-left-area-dock",children:[Object(j.jsx)("div",{className:"skeleton-left-area-dock-top",children:i.map((function(e,t){return Object(j.jsx)("div",{className:b()("skeleton-left-area-dock-item",{"skeleton-left-area-dock-item-selected":e.name===o}),onClick:function(){return n.handleDockItemOnSelect(e)},children:Object(j.jsx)(O.a,{placement:"right",title:e.title,children:Object(j.jsx)("img",{src:e.icon,className:b()({"skeleton-left-area-dock-item-disabled":e.disabled})})})},t)}))}),Object(j.jsx)("div",{className:"skeleton-left-area-dock-bottom",children:l.map((function(e,t){return Object(j.jsx)("div",{className:b()("skeleton-left-area-dock-item",{"skeleton-left-area-dock-item-selected":e.name===o}),onClick:function(){return n.handleDockItemOnSelect(e)},children:Object(j.jsx)(O.a,{placement:"right",title:e.title,children:Object(j.jsx)("img",{src:e.icon,className:b()({"skeleton-left-area-dock-item-disabled":e.disabled})})})},t)}))})]}),c?Object(j.jsx)("div",{className:b()({"skeleton-left-area-panel-fixed":"float"!=(null===(e=this.leftAreaSelectItem)||void 0===e?void 0:e.boxType),"skeleton-left-area-panel-float":"float"==(null===(t=this.leftAreaSelectItem)||void 0===t?void 0:t.boxType)}),style:function(){var e;return null!==(e=n.leftAreaSelectItem)&&void 0!==e&&e.width?{width:n.leftAreaSelectItem.width}:{}}(),children:h.a.cloneElement(c,{ctx:s})}):null]})}},{key:"renderToolbar",value:function(){var e=this.props,t=e.toolbarArea;e.ctx;return t.length?Object(j.jsx)("div",{className:"skeleton-center-toolbar"}):null}},{key:"renderCenterArea",value:function(){var e=this.props,t=e.centerArea,n=e.ctx;return Object(j.jsx)("div",{className:"skeleton-center-area",children:t.map((function(e,t){if(!e.hidden&&h.a.isValidElement(e.content))return h.a.cloneElement(e.content,{ctx:n,key:t})}))})}},{key:"renderRightArea",value:function(){var e=this.props,t=e.rightArea,n=e.ctx;return Object(j.jsx)("div",{className:"skeleton-right-area",children:t.map((function(e,t){if(!e.hidden&&h.a.isValidElement(e.content))return h.a.cloneElement(e.content,{ctx:n,key:t})}))})}},{key:"handleDockItemOnSelect",value:function(e){var t=this.state.dockSelectName;null!==e&&void 0!==e&&e.disabled||this.setState({dockSelectName:(null===e||void 0===e?void 0:e.name)===t?"":null===e||void 0===e?void 0:e.name})}},{key:"openDockByName",value:function(e){this.setState({dockSelectName:e})}},{key:"render",value:function(){var e=this,t=this.props;t.topArea,t.leftArea,t.centerArea,t.rightArea,t.ctx;return Object(j.jsxs)("div",{className:"skeleton",children:[Object(j.jsx)("div",{className:"skeleton-top-area",children:this.renderTopArea()}),Object(j.jsxs)("div",{className:"skeleton-bottom",children:[Object(j.jsx)("div",{className:"skeleton-left-area",ref:function(t){return e.refLeftArea=t},children:this.renderLeftArea()}),Object(j.jsxs)("div",{className:"skeleton-center",children:[this.renderToolbar(),this.renderCenterArea()]}),this.renderRightArea()]})]})}}]),n}(h.a.PureComponent);x.defaultProps={ctx:{},topArea:[],leftArea:[],centerArea:[],rightArea:[],toolbarArea:[]};var y=x,D=n(376),k=n.n(D),N=n(384),w=n(172),C=n(630),S=(n(299),n(469),n(470),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={visible:!1},a.handleOpenDialog=a.handleOpenDialog.bind(Object(g.a)(a)),a.handleCloseDialog=a.handleCloseDialog.bind(Object(g.a)(a)),a.handleDownload=a.handleDownload.bind(Object(g.a)(a)),a.handleOnKeyGenImg=a.handleOnKeyGenImg.bind(Object(g.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleOnKeyGenImg)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleOnKeyGenImg)}},{key:"handleOnKeyGenImg",value:function(e){var t=this.state.visible;!e.ctrlKey&&!e.metaKey||83!=e.keyCode||t||(e.preventDefault(),this.handleOpenDialog(!1))}},{key:"handleOpenDialog",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.props.ctx,a=N.b.loading("\u751f\u6210\u4e2d\u2026\u2026");k()(document.getElementById(n.get("canvas").containerId),{allowTaint:!0,useCORS:!0,scale:4}).then((function(n){a(),e.setState({visible:t},(function(){var a=n.toDataURL();e.refDownloadA.href=a,e.refDownloadA.download=Date.now()+".png",t?e.refPreview.src=a:setTimeout((function(){return e.handleDownload()}))}))})).finally((function(){window.document.body.click()}))}},{key:"handleCloseDialog",value:function(){this.setState({visible:!1})}},{key:"handleDownload",value:function(){this.refDownloadA.click()}},{key:"render",value:function(){var e=this,t=(this.props.ctx,this.state.visible);return Object(j.jsxs)("div",{children:[Object(j.jsx)(w.a,{type:"primary",onClick:this.handleOpenDialog,children:"\u751f\u6210\u56fe\u7247(Cmd+S)"}),Object(j.jsx)("a",{ref:function(t){return e.refDownloadA=t}}),Object(j.jsx)(C.a,{title:"\u751f\u6210\u56fe\u7247",visible:t,onCancel:this.handleCloseDialog,maskClosable:!1,footer:[Object(j.jsx)(w.a,{type:"primary",onClick:this.handleDownload,children:"\u4e0b\u8f7d\u56fe\u7247"},"1")],children:Object(j.jsx)("div",{style:{textAlign:"center"},children:Object(j.jsx)("img",{style:{maxWidth:"100%",maxHeight:"60vh",border:"1px dashed "},ref:function(t){return e.refPreview=t}})})})]})}}]),n}(h.a.Component)),P=S,E=n(635),I=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{children:Object(j.jsx)(w.a,{type:"text",icon:Object(j.jsx)(E.a,{size:"large"}),onClick:function(){window.open("http://github.com/lecepin")}})})}}]),n}(h.a.Component),L=I,_=n(17),T=n(633),M=n(627),A=n(628),z=n(391),G=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={show:!1,value:"",list:[{title:"\u6a2a\u5411\u7167\u7247",value:'{"page":[{"id":"Picture_xJ27Wh9O3muw6haQPoKsO","componentName":"Picture","props":{"url":"https://img.alicdn.com/imgextra/i3/O1CN01oNV2HE1wltLn3iEtB_!!6000000006349-55-tps-300-200.svg","css":":root {width:600px;z-index:0;left:0px;top:0px}"}},{"id":"Logo_pQj-9HV36c7jzCq-gDafJ","componentName":"Logo","props":{"type":"jx","css":":root {width:129px;z-index:1;left:449px;top:290px}"}}]}',canDel:!1},{title:"\u7eb5\u5411\u7167\u7247",value:'{"page":[{"id":"Picture_MarA0CsrJqB4bUGRkIRKi","componentName":"Picture","props":{"url":"https://img.alicdn.com/imgextra/i4/O1CN01N0gbIu1a6Hp83Ytej_!!6000000003280-55-tps-200-300.svg","css":":root {width:400px;z-index:0;left:0px;top:0px}"}},{"id":"Logo_3Lrzrwj_iKJqPIouRipMt","componentName":"Logo","props":{"type":"jx","css":":root {width:129px;z-index:2;left:271px;top:498px}"}}]}',canDel:!1}]},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){try{var e=JSON.parse(localStorage.getItem("_d2_tpl_data"));this.setState({list:[].concat(Object(_.a)(this.state.list),Object(_.a)(e))})}catch(t){}}},{key:"handleCloseDialog",value:function(){this.setState({show:!1})}},{key:"handleSaveTpl",value:function(e,t){var n=this;this.setState({list:[].concat(Object(_.a)(this.state.list),[{title:e,value:t,canDel:!0}]),show:!1},(function(){localStorage.setItem("_d2_tpl_data",JSON.stringify(n.state.list.filter((function(e){return e.canDel})))),N.b.success("\u4fdd\u5b58\u6a21\u677f\u6210\u529f")}))}},{key:"render",value:function(){var e=this,t=this.props.ctx.get("dsl"),n=this.state,a=n.show,r=n.value,s=n.list;return Object(j.jsxs)("div",{children:[Object(j.jsx)(T.a.Button,{onClick:function(){e.setState({show:!0,value:(new Date).toLocaleString()})},overlay:Object(j.jsx)(M.a,{onClick:function(e){var n=e.key;t.setDSL(JSON.parse(s[n].value)),N.b.info("\u5df2\u8f7d\u5165\u6a21\u677f")},children:null===s||void 0===s?void 0:s.map((function(t,n){return Object(j.jsx)(M.a.Item,{children:Object(j.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(j.jsx)("span",{children:t.title}),Object(j.jsx)(w.a,{onClick:function(t){t.stopPropagation(),s.splice(n,1),e.setState({list:s},(function(){localStorage.setItem("_d2_tpl_data",JSON.stringify(e.state.list.filter((function(e){return e.canDel}))))}))},danger:!0,disabled:!t.canDel,type:"text",icon:Object(j.jsx)(z.a,{})})]})},n)}))}),children:"\u4fdd\u5b58\u6a21\u677f"}),Object(j.jsx)(C.a,{title:"\u4fdd\u5b58\u6a21\u677f",visible:a,onCancel:function(){return e.handleCloseDialog()},onOk:function(){return e.handleSaveTpl(r,JSON.stringify(t.dsl))},cancelText:"\u53d6\u6d88",okText:"\u4fdd\u5b58",children:Object(j.jsx)(A.a,{value:r,onChange:function(t){return e.setState({value:t.target.value})},prefix:Object(j.jsx)("div",{children:"\u6a21\u677f\u540d\u79f0\uff1a"}),autoFocus:!0})})]})}}]),n}(h.a.Component),H=G,B=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{style:{display:"flex",alignItems:"center",color:"#f14767",fontWeight:"bold"},children:Object(j.jsx)("img",{src:"https://img.alicdn.com/imgextra/i3/O1CN01eil6G51NU1LH5f3bY_!!6000000001572-2-tps-586-90.png",height:"30"})})}}]),n}(h.a.Component),V=B,R=n(631),W=n(632),K=n(634),U=n(152),J=n.n(U);n(471),new J.a({name:"le-PanelComponent",level:"error"});var F=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).refGhost=null,a.handleOnDragStart=a.handleOnDragStart.bind(Object(g.a)(a)),a.handleOnDrag=a.handleOnDrag.bind(Object(g.a)(a)),a.handleOnDragEnd=a.handleOnDragEnd.bind(Object(g.a)(a)),a}return Object(i.a)(n,[{key:"handleOnDragStart",value:function(e){var t=e.target,n=e.dataTransfer;"component"==t.dataset.type&&this.refGhost&&(n.effectAllowed="move",this.refGhost.innerText=t.dataset.title,n.setDragImage(this.refGhost,0,this.refGhost.clientHeight/2),n.setData("componentName",t.dataset.componentName))}},{key:"handleOnDrag",value:function(e){e.target.style.cursor="unset",window.document.getElementsByTagName("html")[0].style.cursor="move"}},{key:"handleOnDragEnd",value:function(e){var t=e.target;window.document.getElementsByTagName("html")[0].style.cursor="default",t.style.cursor="grab"}},{key:"render",value:function(){var e=this,t=function(e){var t={};return e.forEach((function(e,n){t[e.category]||(t[e.category]=[]),1!=e.hidden&&t[e.category].push(e)})),Object.entries(t).filter((function(e){return e[1].length})).map((function(e,t){return{key:e[0],id:t,value:e[1]}}))}(this.props.ctx.get("component"));return Object(j.jsxs)("div",{className:"panel-component",onDragStart:this.handleOnDragStart,onDragEnd:this.handleOnDragEnd,onDrag:this.handleOnDrag,children:[Object(j.jsx)("div",{className:"panel-component-ghost-hidden",children:Object(j.jsx)("div",{className:"panel-component-ghost",ref:function(t){return e.refGhost=t}})}),Object(j.jsx)(R.a,{defaultActiveKey:t.map((function(e){return e.id})),bordered:!1,onChange:function(e){return e},children:t.map((function(e){return Object(j.jsx)(R.a.Panel,{header:e.key,children:Object(j.jsx)(W.a,{children:e.value.map((function(e,t){return Object(j.jsx)(K.a,{span:6,children:Object(j.jsxs)("div",{className:"panel-component-item",draggable:!0,title:e.title,"data-type":"component","data-title":e.title,"data-component-name":e.componentName,children:[e.icon,Object(j.jsx)("div",{className:"panel-component-item-title",children:e.title})]})},t)}))})},e.id)}))})]})}}]),n}(h.a.Component);F.defaultProps={};var Y=F,X=n(197),q=(n(472),new J.a({name:"le-PanelAttribute",level:"error"})),Z=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={componentInfo:null,dslInfo:null},a.offEventNodeSelect=null,a.handleEventNodeSelect=a.handleEventNodeSelect.bind(Object(g.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=this.props.ctx;this.offEventNodeSelect=null===n||void 0===n||null===(e=n.get("event"))||void 0===e||null===(t=e.on)||void 0===t?void 0:t.call(e,"le.node.select",this.handleEventNodeSelect)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.offEventNodeSelect)||void 0===e||e.call(this)}},{key:"handleEventNodeSelect",value:function(e){q.log("handleEventNodeSelect",e),this.setState({componentInfo:null===e||void 0===e?void 0:e.componentInfo,dslInfo:null===e||void 0===e?void 0:e.dslInfo})}},{key:"render",value:function(){var e,t,n=this.state,a=n.componentInfo,r=n.dslInfo,s=this.props.ctx.get("dsl");return q.log("render"),a?Object(j.jsxs)("div",{className:"panel-attribute",children:[Object(j.jsx)("div",{className:"panel-attribute-name",children:null===a||void 0===a?void 0:a.title}),Object(j.jsx)("div",{className:"panel-attribute-content",children:null===a||void 0===a||null===(e=a.props)||void 0===e||null===(t=e.filter((function(e){return"none"!=e.display})))||void 0===t?void 0:t.map((function(e,t){return Object(j.jsxs)("div",{className:"panel-attribute-item",children:[Object(j.jsx)("div",{className:"panel-attribute-item-title",children:e.title}),Object(j.jsx)("div",{className:"panel-attribute-item-content",children:h.a.cloneElement(e.setter,{value:r.props[e.name],setValue:function(t){return s.setPageDslProp(e.name,t,r.id)}})})]},t)}))})]}):Object(j.jsx)("div",{className:"panel-attribute",children:Object(j.jsx)("div",{className:"panel-attribute-noselect",children:"\u8bf7\u5728\u5de6\u4fa7\u753b\u5e03\u9009\u62e9"})})}}]),n}(h.a.Component),Q=Object(X.a)(Z),$=n(14),ee=n(22),te=n(182);function ne(e,t){var n={};return Object.keys(e).map((function(t){n[t]=e[t]})),n}var ae={renderStyle:function e(t){if(!t)return"";var n=[];return(Array.isArray(t)?t:[t]).map((function(t){var a;null!==t&&void 0!==t&&null!==(a=t.props)&&void 0!==a&&a.css&&t.id&&(n.push({id:t.id,css:t.props.css.replace(":root",".".concat(t.id))}),n.concat(e(t.children)))})),n},renderSchema:function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t?(Array.isArray(t)?t:[t]).map((function(t,s){var o;return t.componentName?h.a.createElement((null===n||void 0===n||null===(o=n.get(t.componentName))||void 0===o?void 0:o.view)||Object(te.toLower)(t.componentName),Object(ee.a)(Object(ee.a)({},ne(t.props||{})),{},{className:t.id,key:s,__componentName:t.componentName,__id:t.id},r),e(t.children,n,a,r)):t})):null},appendStyle:function(e){var t=e.id,n=e.css,a=document.getElementById("style-"+t);if(a)a.innerHTML=n;else{var r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id","style-"+t),r.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(r)}}},re=(n(473),new J.a({name:"le-DesignRender",level:"error"})),se=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){re.log("render");var e=this.props,t=e.dsl,n=e.component,a=e.style,r=void 0===a?{}:a,s=e.className,o=e.getComponentInstance;return ae.renderStyle(t).map((function(e){return ae.appendStyle(e)})),Object(j.jsx)("div",{className:b()("design-render",s),style:r,children:ae.renderSchema(t,n,this,{ref:o})})}}]),n}(h.a.Component),oe=Object(X.a)(se),ie=n(378),le=n.n(ie),ce=(n(500),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).portalDom=document.createElement("div"),document.body.appendChild(a.portalDom),a}return Object(i.a)(n,[{key:"getEl",value:function(){return s.a.findDOMNode(this.ref)}},{key:"setStyle",value:function(e){var t=this.getEl();Object.entries(e).map((function(e){t.style[e[0]]=e[1]}))}},{key:"setName",value:function(e){s.a.findDOMNode(this.refName).textContent=e}},{key:"setNode",value:function(e,t){if(e){var n=e.getBoundingClientRect(),a=n.left,r=n.top,s=(n.width,n.height,e.offsetWidth),o=e.offsetHeight;this.setStyle({left:a+"px",top:r+"px",width:s+"px",height:o+"px",display:"block"}),this.setName(t.componentInfo.title)}else this.setStyle({display:"none"})}},{key:"componentWillUnmount",value:function(){document.body.removeChild(this.portalDom)}},{key:"render",value:function(){var e=this;return Object(r.createPortal)(Object(j.jsx)("div",{ref:function(t){return e.ref=t},className:"panel-canvas-base-hover-ghost",children:Object(j.jsx)("div",{ref:function(t){return e.refName=t},className:"panel-canvas-base-hover-ghost-name"})}),this.portalDom)}}]),n}(h.a.PureComponent)),de=(n(501),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={size:"0",x:"0",y:"0"},a}return Object(i.a)(n,[{key:"setPos",value:function(e){var t=e.size,n=e.x,a=e.y;this.setState({size:t,x:n,y:a})}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.color,a=this.state,r=a.size,s={left:a.x,top:a.y,borderColor:n};return"hor"==t?s.width=r:s.height=r,Object(j.jsx)("div",{className:b()("reference-line","reference-line-"+t),style:s})}}]),n}(h.a.Component));de.defaultProps={type:"hor",color:"#f759ab"};var he=n.p+"static/media/del.e6962b35.svg",ue=(n.p,n.p+"static/media/drag.fa656f9f.svg"),pe=n.p+"static/media/top.b88164e7.svg",ve=n.p+"static/media/bottom.d38bfaa6.svg",fe=(n(502),new J.a({name:"le-SelectGhost",level:"error"}),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e))._node=a.startDrag=a.startMoveDir=null,a.refMask=a.ref=a.refTopHorLine=a.refLeftVerLine=a.refRightVerLine=null,a.startPos={},a.attractDelta=10,a.handleClickResize=a.handleClickResize.bind(Object(g.a)(a)),a.handleWindowResize=Object(te.throttle)(a.handleClickResize.bind(Object(g.a)(a)),300),a.handleMouseDown=a.handleMouseDown.bind(Object(g.a)(a)),a.handleMouseMove=a.handleMouseMove.bind(Object(g.a)(a)),a.handleMouseUp=a.handleMouseUp.bind(Object(g.a)(a)),a.handleDel=a.handleDel.bind(Object(g.a)(a)),a.handleToBottom=a.handleToBottom.bind(Object(g.a)(a)),a.handleToTop=a.handleToTop.bind(Object(g.a)(a)),a.portalDom=document.createElement("div"),document.body.appendChild(a.portalDom),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickResize),window.addEventListener("resize",this.handleWindowResize),window.addEventListener("keyup",this.handleWindowResize),window.addEventListener("mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickResize),window.removeEventListener("resize",this.handleWindowResize),window.addEventListener("keyup",this.handleWindowResize),window.removeEventListener("mouseup",this.handleMouseUp),document.body.removeChild(this.portalDom)}},{key:"getEl",value:function(){return s.a.findDOMNode(this.ref)}},{key:"setStyle",value:function(e){var t=this.getEl();t&&Object.entries(e).map((function(e){t.style[e[0]]=e[1]}))}},{key:"setName",value:function(e){s.a.findDOMNode(this.refName).textContent=e}},{key:"_setNodeStyle",value:function(){var e,t=this,n=null===(e=this._node)||void 0===e?void 0:e.el,a=this.props.canvasDomId;if(n){document.getElementById(a).getBoundingClientRect();var r=n.getBoundingClientRect(),s=r.left,o=r.top,i=r.right,l=(r.bottom,r.width,r.height,n.offsetWidth),c=n.offsetHeight;this.setStyle({left:s+"px",top:o+"px",width:l+"px",height:c+"px",display:"block"});var d={left:"unset",top:"unset",right:"unset",bottom:"unset"};o<30?d.bottom="-30px":d.top="-30px",s<0?d.right=0:i>window.innerWidth?d.left=0:d.right=0,Object.entries(d).map((function(e){var n=Object($.a)(e,2),a=n[0],r=n[1];return t.refOp.style[a]=r}))}else this.setStyle({display:"none"})}},{key:"handleClickResize",value:function(){this._setNodeStyle()}},{key:"setNode",value:function(e){var t,n=this.props.ctx;null===n||void 0===n||null===(t=n.get("event"))||void 0===t||t.emit("le.node.select",e),this._node=e,this._setNodeStyle()}},{key:"handleMouseDown",value:function(e){var t;e.stopPropagation(),e.preventDefault();var n=this.props.onDragStart,a=null===(t=this._node)||void 0===t?void 0:t.el;return this.startPos={mouseX:e.target.getBoundingClientRect().x+e.target.offsetWidth/2,mouseY:e.target.getBoundingClientRect().y+ +e.target.offsetHeight/2,width:this.ref.clientWidth,height:this.ref.clientHeight,top:parseInt(this.ref.offsetTop)||0,left:parseInt(this.ref.offsetLeft)||0,selectTop:parseInt(a.offsetTop)||0,selectLeft:parseInt(a.offsetLeft)||0,dir:e.target.dataset.dir,selectStyle:a.style},window.addEventListener("mousemove",this.handleMouseMove),e.target.classList.contains("panel-canvas-base-select-ghost-drag")?(null===n||void 0===n||n(),this.startDrag=!0,void(a.style.transition="none")):e.target.classList.contains("panel-canvas-base-select-ghost-block")?(this.startMoveDir=!0,void(a.style.transition="none")):void 0}},{key:"handleMouseMove",value:function(e){var t,n=this.props,a=n.onDrag,r=n.canvasDomId,s=null===(t=this._node)||void 0===t?void 0:t.el,o=document.getElementById(r).getBoundingClientRect(),i={},l=e.clientX-this.startPos.mouseX,c=e.clientY-this.startPos.mouseY;if(this.startDrag){this.refMask.style.display="block",this.ref.style.zIndex=99999;var d=this.startPos.top+c,h=this.startPos.left+l;return d>=-1*this.attractDelta+o.top&&d<=this.attractDelta+o.top?(this.ref.style.top=o.top+"px",i.top=0,this.refTopHorLine.setPos({size:o.width+"px",x:o.left+"px",y:o.top+"px"})):d+this.startPos.height>=-1*this.attractDelta+o.bottom&&d+this.startPos.height<=this.attractDelta+o.bottom?(this.ref.style.top=o.bottom-this.startPos.height+"px",i.top=o.height-this.startPos.height+"px",this.refBottomHorLine.setPos({size:o.width+"px",x:o.left+"px",y:o.bottom+"px"})):(this.ref.style.top=this.startPos.top+c+"px",i.top=this.startPos.selectTop+c+"px",this.refTopHorLine.setPos({size:0}),this.refBottomHorLine.setPos({size:0})),h>=-1*this.attractDelta+o.left&&h<=this.attractDelta+o.left?(this.ref.style.left=o.left+"px",i.left=0,this.refLeftVerLine.setPos({size:o.height+"px",x:o.left+"px",y:o.top+"px"})):h+this.startPos.width>=-1*this.attractDelta+o.right&&h+this.startPos.width<=this.attractDelta+o.right?(this.ref.style.left=o.right-this.startPos.width+"px",i.left=o.width-this.startPos.width+"px",this.refRightVerLine.setPos({size:o.height+"px",x:o.right+"px",y:o.top+"px"})):(this.ref.style.left=this.startPos.left+l+"px",i.left=this.startPos.selectLeft+l+"px",this.refLeftVerLine.setPos({size:0}),this.refRightVerLine.setPos({size:0})),s.style.left=i.left,s.style.top=i.top,void(null===a||void 0===a||a(i))}if(this.startMoveDir){if("t"==this.startPos.dir[0]){var u=this.startPos.top+c;u>=-1*this.attractDelta+o.top&&u<=this.attractDelta+o.top?(this.ref.style.top=o.top+"px",this.ref.style.height=this.startPos.height-(o.top-this.startPos.mouseY)+"px",i.top="0px",i.height=this.startPos.height-(o.top-this.startPos.mouseY)+"px",this.refTopHorLine.setPos({size:o.width+"px",x:o.left+"px",y:o.top+"px"})):(this.ref.style.top=this.startPos.top+c+"px",this.ref.style.height=this.startPos.height-c+"px",i.top=this.startPos.selectTop+c+"px",i.height=this.startPos.height-c+"px",this.refTopHorLine.setPos({size:0}))}else if("b"==this.startPos.dir[0]){var p=this.startPos.top+c;p+this.startPos.height>=-1*this.attractDelta+o.bottom&&p+this.startPos.height<=this.attractDelta+o.bottom?(this.ref.style.height=this.startPos.height+(o.bottom-this.startPos.mouseY)+"px",i.height=this.startPos.height+(o.bottom-this.startPos.mouseY)+"px",this.refBottomHorLine.setPos({size:o.width+"px",x:o.left+"px",y:o.bottom+"px"})):(this.ref.style.height=this.startPos.height+c+"px",i.height=this.startPos.height+c+"px",this.refBottomHorLine.setPos({size:0}))}if("l"==this.startPos.dir[1]){var v=this.startPos.left+l;v>=-1*this.attractDelta+o.left&&v<=this.attractDelta+o.left?(this.ref.style.left=o.left+"px",this.ref.style.width=this.startPos.width-(o.left-this.startPos.mouseX)+"px",i.left=0,i.width=this.startPos.width-(o.left-this.startPos.mouseX)+"px",this.refLeftVerLine.setPos({size:o.height+"px",x:o.left+"px",y:o.top+"px"})):(this.ref.style.left=this.startPos.left+l+"px",this.ref.style.width=this.startPos.width-l+"px",i.left=this.startPos.selectLeft+l+"px",i.width=this.startPos.width-l+"px",this.refLeftVerLine.setPos({size:0}))}else if("r"==this.startPos.dir[1]){var f=this.startPos.left+l;f+this.startPos.width>=-1*this.attractDelta+o.right&&f+this.startPos.width<=this.attractDelta+o.right?(this.ref.style.width=this.startPos.width+(o.right-this.startPos.mouseX)+"px",i.width=this.startPos.width+(o.right-this.startPos.mouseX)+"px",this.refRightVerLine.setPos({size:o.height+"px",x:o.right+"px",y:o.top+"px"})):(this.ref.style.width=this.startPos.width+l+"px",i.width=this.startPos.width+l+"px",this.refRightVerLine.setPos({size:0}))}Object.entries(i).filter((function(e){var t=Object($.a)(e,2),n=t[0],a=t[1];return s.style[n]=a}))}}},{key:"handleMouseUp",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),window.removeEventListener("mousemove",this.handleMouseMove);var n=this.props.onDragEnd;(this.startDrag||this.startMoveDir)&&setTimeout((function(){var e,a,r,s,o,i,l,c,d,h,u,p,v,f,g,m,b={left:((null===(e=t._node)||void 0===e||null===(a=e.el)||void 0===a?void 0:a.offsetLeft)||0)+"px",top:((null===(r=t._node)||void 0===r||null===(s=r.el)||void 0===s?void 0:s.offsetTop)||0)+"px"};(null===(o=t._node)||void 0===o||null===(i=o.el)||void 0===i||null===(l=i.style)||void 0===l?void 0:l.width)&&(b.width=null===(c=t._node)||void 0===c||null===(d=c.el)||void 0===d||null===(h=d.style)||void 0===h?void 0:h.width),(null===(u=t._node)||void 0===u||null===(p=u.el)||void 0===p||null===(v=p.style)||void 0===v?void 0:v.height)&&(b.height=null===(f=t._node)||void 0===f||null===(g=f.el)||void 0===g||null===(m=g.style)||void 0===m?void 0:m.height),t._node.el.style=t.startPos.selectStyle,null===n||void 0===n||n(b,t._node)})),this.startDrag=this.startMoveDir=!1,this.refMask.style.display="none",this.ref.style.zIndex=800,this.refTopHorLine.setPos({size:0}),this.refBottomHorLine.setPos({size:0}),this.refLeftVerLine.setPos({size:0}),this.refRightVerLine.setPos({size:0})}},{key:"handleDel",value:function(){var e,t=this.props,n=t.ctx,a=t.onDel;null===n||void 0===n||null===(e=n.get("event"))||void 0===e||e.emit("le.node.select"),null===a||void 0===a||a(this._node),this.setNode(null)}},{key:"handleToTop",value:function(){var e=this.props,t=e.ctx,n=e.onToTop,a=t.get("dsl"),r=t.get("canvas").componentInstance,o=this._node.dslInfo.id,i=this._node.dslInfo.props.css,l={},c=null,d="";a.dsl.page.map((function(e,t,n){var a=e.id,o=e.props,i=r.get(a),h=s.a.findDOMNode(i),u=getComputedStyle(h).getPropertyValue("z-index");u==n.length-1&&(c=a,d=o.css),l[a]=u})),l[o]!=a.dsl.page.length-1&&(null===n||void 0===n||n({currentId:o,currentCss:i,replaceId:c,replaceCss:d,value:a.dsl.page.length-1,swapValue:getComputedStyle(this._node.el).getPropertyValue("z-index")}))}},{key:"handleToBottom",value:function(){var e=this.props,t=e.ctx,n=e.onToBottom,a=t.get("dsl"),r=t.get("canvas").componentInstance,o=this._node.dslInfo.id,i=this._node.dslInfo.props.css,l={},c=null,d="";a.dsl.page.map((function(e,t,n){var a=e.id,o=e.props,i=r.get(a),h=s.a.findDOMNode(i),u=getComputedStyle(h).getPropertyValue("z-index");0==u&&(c=a,d=o.css),l[a]=u})),0!=l[o]&&(null===n||void 0===n||n({currentId:o,currentCss:i,replaceId:c,replaceCss:d,value:0,swapValue:getComputedStyle(this._node.el).getPropertyValue("z-index")}))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.ctx,t.canResize);t.onDrag,t.onDragStart,t.onDragEnd,t.onDel;return Object(r.createPortal)(Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{ref:function(t){return e.ref=t},className:"panel-canvas-base-select-ghost",onMouseDown:this.handleMouseDown,children:[n?Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tl","data-dir":"tl"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tm","data-dir":"tm"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tr","data-dir":"tr"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-ml","data-dir":"ml"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-mr","data-dir":"mr"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bl","data-dir":"bl"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bm","data-dir":"bm"}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-br","data-dir":"br"})]}):null,Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-rotate"}),Object(j.jsxs)("div",{className:"panel-canvas-base-select-ghost-op",ref:function(t){return e.refOp=t},children:[Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-drag",title:"\u62d6\u52a8",children:Object(j.jsx)("img",{src:ue})}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-top",title:"\u7f6e\u9876",onClick:this.handleToTop,children:Object(j.jsx)("img",{src:pe})}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-bottom",title:"\u7f6e\u5e95",onClick:this.handleToBottom,children:Object(j.jsx)("img",{src:ve})}),Object(j.jsx)("div",{className:"panel-canvas-base-select-ghost-del",title:"\u5220\u9664",onClick:this.handleDel,children:Object(j.jsx)("img",{src:he})})]})]}),Object(j.jsx)("div",{ref:function(t){return e.refMask=t},className:"panel-canvas-base-select-ghost-mask"}),Object(j.jsx)(de,{ref:function(t){return e.refTopHorLine=t}}),Object(j.jsx)(de,{ref:function(t){return e.refBottomHorLine=t}}),Object(j.jsx)(de,{type:"ver",ref:function(t){return e.refLeftVerLine=t}}),Object(j.jsx)(de,{type:"ver",ref:function(t){return e.refRightVerLine=t}})]}),this.portalDom)}}]),n}(h.a.PureComponent));fe.defaultProps={canResize:!1};new J.a({name:"le-PanelCanvasBase-utils",level:"error"});function ge(e,t,n){var a,r=t.get(null===e||void 0===e||null===(a=e.memoizedProps)||void 0===a?void 0:a.__componentName)||null;if(!r&&e.return)return ge(e.return,t,n);try{return{componentInfo:r,el:s.a.findDOMNode(e.stateNode),dslInfo:me(e.stateNode.props.__id,n)}}catch(o){return null}}function me(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(a.id==e)return a;if(Array.isArray(a.children)){var r=me(e,a.children);if(r)return r}}return null}n(503);var be=new J.a({name:"le-PanelCanvasAbsolute",level:"error"}),Oe=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).containerId="panel-canvas-absolute",a.componentInstance=new Map,a.currentHover=a.currentSelect=a.currentDragHover=a.refCanvas=a.refHoverGhost=a.refSelectGhost=a.refDesignRender=a.draging=null,a.handleOnMouseOver=Object(te.debounce)(a.handleOnMouseOver.bind(Object(g.a)(a)),50),a.handleOnClickCapture=a.handleOnClickCapture.bind(Object(g.a)(a)),a.handleOnDragOver=Object(te.throttle)(a.handleOnDragOver.bind(Object(g.a)(a)),300),a.handleOnDrop=a.handleOnDrop.bind(Object(g.a)(a)),a.handleOnClick=a.handleOnClick.bind(Object(g.a)(a)),a.handleSelectGhostOnDragStart=a.handleSelectGhostOnDragStart.bind(Object(g.a)(a)),a.handleSelectGhostOnDrag=a.handleSelectGhostOnDrag.bind(Object(g.a)(a)),a.handleSelectGhostOnDragEnd=a.handleSelectGhostOnDragEnd.bind(Object(g.a)(a)),a.handleSelectGhostOnDel=a.handleSelectGhostOnDel.bind(Object(g.a)(a)),a.handleGetComponentInstance=a.handleGetComponentInstance.bind(Object(g.a)(a)),a.handleSelectGhostOnToZIndex=a.handleSelectGhostOnToZIndex.bind(Object(g.a)(a)),a.handleOnMouseLeave=a.handleOnMouseLeave.bind(Object(g.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.ctx.set("canvas",{containerId:this.containerId,componentInstance:this.componentInstance,selectNodeById:this.selectNodeById.bind(this),hoverNodeById:this.hoverNodeById.bind(this)}),window.document.addEventListener("mousemove",this.handleOnMouseOver),window.document.addEventListener("dragover",this.handleWinOnDragOver)}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("mousemove",this.handleOnMouseOver),window.document.removeEventListener("dragover",this.handleWinOnDragOver)}},{key:"handleWinOnDragOver",value:function(e){e.preventDefault()}},{key:"handleOnDragOver",value:function(e){var t=e.target;this.currentDragHover!=t&&(this.currentDragHover=t)}},{key:"handleOnDrop",value:function(e){var t=this,n=e.dataTransfer,a=this.props.ctx,r=a.get("dsl"),s=a.get("component").get(n.getData("componentName"));if(s){var o=r.addPageDSL(s).id;setTimeout((function(){var e=t.selectNodeById(o).dslInfo,n=t._mergeCss(e.props.css,{"z-index":r.dsl.page.length-1});r.setPageDslProp("css",":root {".concat(Object.keys(n).map((function(e){return"".concat(e,":").concat(n[e])})).join(";"),"}"),e.id)}),300)}}},{key:"_mergeCss",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=le.a.parse(e,{silent:!0});if(n.stylesheet.parsingErrors.length)return be.error("\u6e90\u7801\u9519\u8bef: "+n.stylesheet.parsingErrors),{};var a={};return n.stylesheet.rules[0].declarations.map((function(e){a[e.property]=e.value})),Object.entries(t).map((function(e){var t=Object($.a)(e,2),n=t[0],r=t[1];a[n]=r})),a}},{key:"handleOnMouseOver",value:function(e){if(this.refCanvas.contains(e.target)){var t=e.target,n=this.props.ctx,r=Object.keys(t).find((function(e){return e.startsWith("__reactFiber$")}));if(t==this.currentSelect)return this.refHoverGhost.setNode(null),void(this.currentHover=null);if(this.currentHover!=t){if(!r||!this.refCanvas.contains(t))return this.refHoverGhost.setNode(null),void(this.currentHover=null);var s=a.getComponentNodeByFiberNode(t[r],n.get("component"),n.get("dsl").dsl.page);s?(this.refHoverGhost.setNode(s.el,s),this.currentHover=t):this.refHoverGhost.setNode(null)}}else this.currentHover=null}},{key:"handleOnClickCapture",value:function(e){if(Object(r.findDOMNode)(this.refDesignRender).contains(e.target)&&(e.stopPropagation(),!this.draging)){var t=e.target,n=this.props.ctx,s=Object.keys(t).find((function(e){return e.startsWith("__reactFiber$")}));if(this.currentSelect!=t)if(s&&this.refCanvas.contains(t)){var o=a.getComponentNodeByFiberNode(t[s],n.get("component"),n.get("dsl").dsl.page);this.currentSelect=t,o?(this.refSelectGhost.setNode(o),this.refHoverGhost.setNode(null)):this.refSelectGhost.setNode(null)}else this.refSelectGhost.setNode(null)}}},{key:"handleOnClick",value:function(e){}},{key:"handleSelectGhostOnDragStart",value:function(){this.draging=!0}},{key:"handleSelectGhostOnDrag",value:function(){}},{key:"handleSelectGhostOnDragEnd",value:function(e,t){var n=t.dslInfo,a=this.props.ctx.get("dsl"),r=this._mergeCss(n.props.css,e);this.draging=!1,a.setPageDslProp("css",":root {".concat(Object.keys(r).map((function(e){return"".concat(e,":").concat(r[e])})).join(";"),"}"),n.id)}},{key:"handleSelectGhostOnDel",value:function(e){var t=e.dslInfo;this.props.ctx.get("dsl").delPageDsl(t.id),this.currentSelect=this.currentHover=null}},{key:"handleGetComponentInstance",value:function(e){var t;null!==e&&void 0!==e&&null!==(t=e.props)&&void 0!==t&&t.__id&&this.componentInstance.set(e.props.__id,e)}},{key:"handleSelectGhostOnToZIndex",value:function(e){var t=e.currentId,n=e.currentCss,a=e.replaceId,r=e.replaceCss,s=e.value,o=e.swapValue,i=this.props.ctx.get("dsl");t!=a&&(i.setPageDslProp("css",":root {".concat(Object.entries(this._mergeCss(n,{"z-index":s})).map((function(e){var t=Object($.a)(e,2),n=t[0],a=t[1];return"".concat(n,":").concat(a)})).join(";"),"}"),t),a&&i.setPageDslProp("css",":root {".concat(Object.entries(this._mergeCss(r,{"z-index":o})).map((function(e){var t=Object($.a)(e,2),n=t[0],a=t[1];return"".concat(n,":").concat(a)})).join(";"),"}"),a))}},{key:"selectNodeById",value:function(e){var t=this.props.ctx,n=t.get("dsl"),a=t.get("component");if(!this.componentInstance.get(e))return this.currentSelect=null,void this.refSelectGhost.setNode(null);var s={el:Object(r.findDOMNode)(this.componentInstance.get(e)),dslInfo:n.getPageDSL(e)};return s.componentInfo=a.get(s.dslInfo.componentName),this.refSelectGhost.setNode(s),this.currentSelect=s.el,s}},{key:"hoverNodeById",value:function(e){var t,n=this.props.ctx,a=n.get("dsl"),s=n.get("component");if(!this.componentInstance.get(e))return this.refHoverGhost.setNode(null),void(this.currentHover=null);try{t=Object(r.findDOMNode)(this.componentInstance.get(e))}catch(i){return}var o={el:t,dslInfo:a.getPageDSL(e)};return o.componentInfo=s.get(o.dslInfo.componentName),this.refHoverGhost.setNode(o.el,o),this.currentHover=o.el,o}},{key:"handleOnMouseLeave",value:function(){this.refHoverGhost.setNode(null)}},{key:"render",value:function(){var e=this,t=this.props.ctx,n=t.get("dsl"),a=t.get("component");return be.log("render"),Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"panel-canvas-absolute",id:this.containerId,onClickCapture:this.handleOnClickCapture,onClick:this.handleOnClick,onDragOver:this.handleOnDragOver,onDrop:this.handleOnDrop,onMouseLeave:this.handleOnMouseLeave,ref:function(t){return e.refCanvas=t},children:[Object(j.jsx)(fe,{ref:function(t){return e.refSelectGhost=t},canvasDomId:this.containerId,ctx:t,canResize:!0,onDragStart:this.handleSelectGhostOnDragStart,onDragEnd:this.handleSelectGhostOnDragEnd,onDel:this.handleSelectGhostOnDel,onToTop:this.handleSelectGhostOnToZIndex,onToBottom:this.handleSelectGhostOnToZIndex}),Object(j.jsx)(ce,{ref:function(t){return e.refHoverGhost=t}}),Object(j.jsx)(oe,{ref:function(t){return e.refDesignRender=t},className:"panel-canvas-absolute-render",dsl:n.dsl.page,component:a,style:{height:"100%"},getComponentInstance:this.handleGetComponentInstance})]})})}}]),n}(h.a.Component),je=Object(X.a)(Oe),xe=n(15),ye=n(626),De=n(636),ke=(n(504),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={x:600,y:400},a.type="hor",a.typeMap={hor:'{"page":[{"id":"Picture_xJ27Wh9O3muw6haQPoKsO","componentName":"Picture","props":{"url":"https://img.alicdn.com/imgextra/i3/O1CN01oNV2HE1wltLn3iEtB_!!6000000006349-55-tps-300-200.svg","css":":root {width:600px;z-index:0;left:0px;top:0px}"}},{"id":"Logo_pQj-9HV36c7jzCq-gDafJ","componentName":"Logo","props":{"type":"jx","css":":root {width:129px;z-index:1;left:449px;top:290px}"}}]}',ver:'{"page":[{"id":"Picture_MarA0CsrJqB4bUGRkIRKi","componentName":"Picture","props":{"url":"https://img.alicdn.com/imgextra/i4/O1CN01N0gbIu1a6Hp83Ytej_!!6000000003280-55-tps-200-300.svg","css":":root {width:400px;z-index:0;left:0px;top:0px}"}},{"id":"Logo_3Lrzrwj_iKJqPIouRipMt","componentName":"Logo","props":{"type":"jx","css":":root {width:129px;z-index:2;left:271px;top:498px}"}}]}'},a.handleOnKeyExchange=a.handleOnKeyExchange.bind(Object(g.a)(a)),a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.state,n=t.x,a=t.y;setTimeout((function(){e.changeDomSize(n,a),e.changeDSL()})),window.addEventListener("keydown",this.handleOnKeyExchange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleOnKeyExchange)}},{key:"handleOnKeyExchange",value:function(e){(e.ctrlKey||e.metaKey)&&88==e.keyCode&&(e.preventDefault(),this.exchange())}},{key:"handleOnChange",value:function(e,t){var n=this;this.setState(Object(xe.a)({},e,t),(function(){var e=n.state,t=e.x,a=e.y;n.changeDomSize(t,a)}))}},{key:"changeDomSize",value:function(e,t){var n=this.props.ctx,a=document.getElementById(n.get("canvas").containerId);a.style.width=e+"px",a.style.height=t+"px"}},{key:"changeDSL",value:function(){var e=this.props.ctx;e.get("dsl").setDSL(JSON.parse(this.typeMap[this.type])),e.get("canvas").selectNodeById()}},{key:"exchange",value:function(){var e=this,t=this.state,n=t.x,a=t.y;this.type="hor"==this.type?"ver":"hor",this.setState({x:a,y:n},(function(){var t=e.state,n=t.x,a=t.y;e.changeDomSize(n,a),e.changeDSL()}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.x,a=t.y;return Object(j.jsxs)("div",{children:[Object(j.jsx)(ye.a,{size:"small",value:n,onChange:function(t){return e.handleOnChange("x",t)}}),"\xa0x\xa0",Object(j.jsx)(ye.a,{size:"small",value:a,onChange:function(t){return e.handleOnChange("y",t)}}),Object(j.jsx)(w.a,{type:"text",icon:Object(j.jsx)(De.a,{}),onClick:function(){e.exchange()},children:"(Cmd+X)"})]})}}]),n}(h.a.Component)),Ne=n(46),we=n.p+"static/media/page.f2be2014.svg",Ce=n.p+"static/media/group.f35c57f1.svg",Se=n.p+"static/media/link.98c02ce7.svg",Pe=(n(505),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"renderIcon",value:function(){if(this.props.renderIcon)return this.props.renderIcon(this.props.type,this.props);var e={page:we,group:Ce,link:Se};return e[this.props.type]?Object(j.jsx)("img",{className:"lp-react-tree-drag-TreeNode-icon",src:e[this.props.type]}):null}},{key:"renderTitle",value:function(){return this.props.renderTitle?this.props.renderTitle(this.props.title,this.props):Object(j.jsx)("div",{className:"lp-react-tree-drag-TreeNode-title","data-__lp_tree_node_id":this.props.id,children:this.props.renderTitle?this.props.renderTitle(this.props.title,this.props):this.props.title})}},{key:"renderOp",value:function(){return Object(j.jsx)("div",{className:"lp-react-tree-drag-TreeNode-op","data-__lp_tree_node_id":this.props.id,children:this.props.renderOp?this.props.renderOp(this.props):null})}},{key:"render",value:function(){var e=this;return Object(j.jsxs)("div",{className:"lp-react-tree-drag-TreeNode",onDragStart:function(t){t.currentTarget.classList.add("lp-react-tree-drag-TreeNode-dragStart"),e.props.onTreeNodeDragStart&&e.props.onTreeNodeDragStart(t)},onDragEnd:function(t){t.currentTarget.classList.remove("lp-react-tree-drag-TreeNode-dragStart"),e.props.onTreeNodeDragEnd&&e.props.onTreeNodeDragEnd(t)},onDragOver:function(e){return e.preventDefault()},"data-__lp_tree_node_id":this.props.id,children:[Object(j.jsxs)("div",{className:"lp-react-tree-drag-TreeNode-left",draggable:!0,"data-__lp_tree_node_id":this.props.id,children:[this.renderIcon(),this.renderTitle()]}),this.renderOp()]})}}]),n}(h.a.Component));Pe.defaultProps={type:"page",title:""};var Ee=n.p+"static/media/arrow.5e646b37.svg",Ie=(n(506),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={expanded:!1},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({expanded:this.props.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.children,r=t.expandedAll,s=t.showLine,o=this.state.expanded;return Object(j.jsxs)("div",{className:b()("lp-react-tree-drag-TreeGroup",{"lp-react-tree-drag-TreeGroup-collapse":!o}),onDragOver:function(e){e.currentTarget.lastChild.lastChild.classList.add("lp-react-tree-drag-TreeGroup-enter"),e.stopPropagation(),e.preventDefault()},onDragLeave:function(e){e.currentTarget.lastChild.lastChild.classList.remove("lp-react-tree-drag-TreeGroup-enter")},children:[Object(j.jsx)("img",{className:"lp-react-tree-drag-TreeGroup-arrow",src:Ee,onClick:function(){return e.setState({expanded:!o})}}),Object(j.jsxs)("div",{className:"lp-react-tree-drag-TreeGroup-node",children:[Object(j.jsx)(Pe,Object(ee.a)(Object(ee.a)({},this.props),{},{onTreeNodeDragStart:function(t){e.setState({expanded:!1})},onTreeNodeDragEnd:function(t){e.setState({expanded:!0})}})),Object(j.jsx)("div",{className:b()("lp-react-tree-drag-TreeGroup-node-ch",{"lp-react-tree-drag-TreeGroup-node-ch-line":s}),children:(a||[]).map((function(e,t){return"group"==e.type?Object(j.jsx)(n,Object(ee.a)(Object(ee.a)({},e),{},{item:e,expanded:!!r||e.expanded,expandedAll:r,showLine:s}),t):Object(d.createElement)(Pe,Object(ee.a)(Object(ee.a)({},e),{},{item:e,key:t}))}))})]})]})}}]),n}(h.a.Component));function Le(e,t){for(var n=0;n<e.length;n++){var a=e[n];if(a.id==t)return e.splice(n,1),a;if(Array.isArray(a.children)){var r=Le(a.children,t);if(r)return r}}}function _e(e,t,n,a){if(!n)return e;for(var r=0;r<e.length;r++){var s=e[r];if(s.id==t){"insertBefore"==a?e.splice(r,0,n):"appendAfter"==a?e.splice(r+1,0,n):"appendChild"==a&&(e[r].children?e[r].children.push(n):e[r].children=[n]);break}Array.isArray(s.children)&&_e(s.children,t,n,a)}}n(507);var Te=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={data:[],expandedAll:!1,showLine:!1},a.dragEnterIndex=a.dragEnterDOM=a.dragPlaceholderIndex=a.refDragPlaceholder=a.data=a.hoverItem=a.isDraging=null,a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({data:this.props.data,expandedAll:this.props.expandedAll,showLine:this.props.showLine})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.data!=this.props.data&&this.setState({data:e.data})}},{key:"onHover",value:function(e){var t,n=e.target;if(!this.isDraging){var a=this.state.data,r=null===n||void 0===n?void 0:n.dataset.__lp_tree_node_id;if(this.hoverItem!=r){this.hoverItem=r;for(var s=0;s<(null===a||void 0===a?void 0:a.length);s++){var o,i=a[s];if(i.id==r)return void(null===(o=this.props)||void 0===o||o.onHover(i))}null===(t=this.props)||void 0===t||t.onHover({})}}}},{key:"onClick",value:function(e){for(var t=e.target,n=this.state.data,a=null===t||void 0===t?void 0:t.dataset.__lp_tree_node_id,r=0;r<(null===n||void 0===n?void 0:n.length);r++){var s,o=n[r];if(o.id==a)return void(null===(s=this.props)||void 0===s||s.onClick(o))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.expandedAll,r=t.showLine,o=t.key,i=this.props.onChange;return Object(j.jsxs)("div",{className:"lp-react-tree-drag-Tree",onDrag:function(t){if(e.dragEnterDOM){var n="lp-react-tree-drag-TreeGroup-node"==e.dragEnterDOM.parentElement.className?e.dragEnterDOM.parentElement.lastElementChild:e.dragEnterDOM.parentElement,a=e.dragEnterDOM.getBoundingClientRect(),r=a.top,s=a.height;if(Object(_.a)(e.dragEnterDOM.classList).includes("lp-react-tree-drag-TreeGroup-node-ch"))t.clientY<r+s&&t.clientY>r+s-5&&(e.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(e.refDragPlaceholder,e.dragEnterDOM.parentElement.parentElement.nextElementSibling),_e(e.data,e.dragEnterIndex,Le(e.data,e.dragPlaceholderIndex),"appendAfter"));else{var o=Le(e.data,e.dragPlaceholderIndex);t.clientY<r+s/2?("lp-react-tree-drag-TreeGroup-node"==e.dragEnterDOM.parentElement.className?e.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(e.refDragPlaceholder,e.dragEnterDOM.parentElement.parentElement):n.insertBefore(e.refDragPlaceholder,e.dragEnterDOM),_e(e.data,e.dragEnterIndex,o,"insertBefore")):"lp-react-tree-drag-TreeGroup-node"==e.dragEnterDOM.parentElement.className?(n.appendChild(e.refDragPlaceholder),_e(e.data,e.dragEnterIndex,o,"appendChild")):(n.insertBefore(e.refDragPlaceholder,e.dragEnterDOM.nextElementSibling),_e(e.data,e.dragEnterIndex,o,"appendAfter")),e.dragEnterDOM=null}}},onDragStart:function(t){e.dragPlaceholderIndex=t.target.dataset.__lp_tree_node_id,e.data=Object(te.cloneDeep)(n),e.isDraging=!0},onDragEnd:function(t){e.dragEnterDOM=null,e.refDragPlaceholder.style.display="none",e.setState({data:e.data,key:Date.now()}),JSON.stringify(e.data)!=JSON.stringify(e.state.data)&&(null===i||void 0===i||i(e.data)),setTimeout((function(){return e.isDraging=!1}),100)},onDragEnter:function(t){if("lp-react-tree-drag-TreeNode"==t.target.className&&t.target.firstElementChild.dataset.__lp_tree_node_id)e.dragEnterIndex=t.target.firstElementChild.dataset.__lp_tree_node_id,e.dragEnterDOM=t.target;else{if(!Object(_.a)(t.target.classList).includes("lp-react-tree-drag-TreeGroup-node-ch"))return;e.dragEnterIndex=t.target.parentElement.firstElementChild.firstElementChild.dataset.__lp_tree_node_id,e.dragEnterDOM=t.target}e.refDragPlaceholder.style.display="block","lp-react-tree-drag-TreeGroup-node"==e.dragEnterDOM.parentElement.className&&e.dragEnterDOM.parentElement.parentElement.classList.remove("lp-react-tree-drag-TreeGroup-collapse"),e.dragEnterIndex!=e.dragPlaceholderIndex&&e.dragEnterIndex},onDragOver:function(e){return e.preventDefault()},onMouseOver:function(t){return e.onHover(t)},onMouseLeave:function(t){return e.onHover({})},onClick:function(t){return e.onClick(t)},children:[(n||[]).map((function(e,t){return"group"==e.type?Object(j.jsx)(Ie,Object(ee.a)(Object(ee.a)({},e),{},{item:e,expanded:!!a||e.expanded,expandedAll:a,showLine:r}),t):Object(d.createElement)(Pe,Object(ee.a)(Object(ee.a)({},e),{},{item:e,key:t}))})),Object(j.jsx)("div",{className:"lp-react-tree-drag-TreeNode-placeholder",ref:function(t){return e.refDragPlaceholder=s.a.findDOMNode(t)}})]},o)}}]),n}(h.a.Component);Te.defaultProps={data:[],expandedAll:!1,showLine:!1,key:Date.now(),onHover:function(){return null},onChange:function(){return null},onClick:function(){return null}};n(508);var Me=["title","props"],Ae=new J.a({name:"le-PanelOutline",level:"error"}),ze=Object(X.a)(function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onHover=Object(te.debounce)(a.onHover.bind(Object(g.a)(a)),300),a}return Object(i.a)(n,[{key:"onHover",value:function(e){this.props.ctx.get("canvas").hoverNodeById(e.id)}},{key:"render",value:function(){var e=this.props.ctx,t=e.get("dsl"),n=e.get("canvas");return Ae.log("render"),Object(j.jsx)("div",{className:"panel-outline",children:Object(j.jsx)(Te,{onHover:this.onHover,onClick:function(e){n.selectNodeById(e.id)},onChange:function(e){var n=e.map((function(e,t,n){e.title;var a,r,s=e.props,o=Object(Ne.a)(e,Me);return Object(ee.a)(Object(ee.a)({},o),{},{props:Object(ee.a)(Object(ee.a)({},s),{},{css:(a=s.css,r=n.length-t-1,a.replace(/z-index:\s*(-?\d+?)/,"z-index:".concat(r)))})})}));t.setDSL({page:n})},data:t.dsl.page.slice().sort((function(e,t){return-Ge(e.props.css)+Ge(t.props.css)})).map((function(e){return Object(ee.a)(Object(ee.a)({},e),{},{title:e.componentName})}))})})}}]),n}(h.a.Component));function Ge(e){var t;return Number(null===(t=e.match(/z-index:\s*(-?\d+?)/))||void 0===t?void 0:t[1])}var He=["value","setValue"],Be=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onChange",value:function(e){(0,this.props.setValue)(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=(t.setValue,Object(Ne.a)(t,He));return Object(j.jsx)(A.a,Object(ee.a)({value:n,onChange:function(t){return e.onChange(t)}},a))}}]),n}(h.a.Component),Ve=n(629),Re=["value","setValue","dataSource"],We=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"onChange",value:function(e){(0,this.props.setValue)(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,a=(t.setValue,t.dataSource),r=Object(Ne.a)(t,Re);return Object(j.jsx)(Ve.a,Object(ee.a)(Object(ee.a)({value:n,onChange:function(t){return e.onChange(t)},style:{width:"100%"}},r),{},{children:a.map((function(e,t){return Object(j.jsx)(Ve.a.Option,{value:e.value,children:e.title},t)}))}))}}]),n}(h.a.Component);We.defaultProps={dataSource:[]};var Ke={TextSetter:Be,SelectSetter:We},Ue=n(625),Je=n(637),Fe=["value","setValue"],Ye=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"onChange",value:function(e){(0,this.props.setValue)(e.target.value)}},{key:"uploadOnChange",value:function(e){return(0,this.props.setValue)(URL.createObjectURL(e)),!1}},{key:"render",value:function(){var e=this,t=this.props,n=t.value;t.setValue,Object(Ne.a)(t,Fe);return Object(j.jsxs)("div",{style:{display:"flex"},children:[Object(j.jsx)(A.a,{value:n,onChange:function(t){return e.onChange(t)}}),Object(j.jsx)(Ue.a,{showUploadList:!1,beforeUpload:function(t){return e.uploadOnChange(t)},children:Object(j.jsx)(w.a,{icon:Object(j.jsx)(Je.a,{})})})]})}}]),n}(h.a.Component),Xe=(n(509),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.url;e.width;return Object(j.jsx)("img",{className:b()(t,"banner-picture"),src:n})}}]),n}(h.a.Component)),qe={title:"\u56fe\u7247",componentName:"Picture",category:"\u57fa\u7840",icon:Object(j.jsx)("svg",{t:"1636864133288",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2739",width:"128",height:"128",children:Object(j.jsx)("path",{d:"M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z","p-id":"2740"})}),view:Xe,canOperate:!0,hidden:!1,props:[{name:"url",title:"\u5730\u5740",description:"",supportVariable:!0,value:"https://img.alicdn.com/imgextra/i3/O1CN01sqfGyy1wf1PLUCJ8z_!!6000000006334-55-tps-120-120.svg",setter:Object(j.jsx)(Ye,{})},{name:"css",value:":root{width: 50%}",display:"none"}]},Ze=["value","setValue"],Qe=(h.a.Component,n(510),function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.type;return Object(j.jsx)("img",{className:b()(t,"banner-picture"),src:{jx:"https://img.alicdn.com/imgextra/i2/O1CN01Fe2s271gk1t3ZbnNi_!!6000000004179-2-tps-1192-720.png",d2:"https://img.alicdn.com/imgextra/i2/O1CN01FYoKj91X6nPwFoAvK_!!6000000002875-2-tps-601-105.png"}[n]})}}]),n}(h.a.Component)),$e=[qe,{title:"Logo",componentName:"Logo",category:"\u57fa\u7840",icon:Object(j.jsx)("svg",{t:"1639665991757",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"7480",width:"128",height:"128",children:Object(j.jsx)("path",{d:"M810.666667 469.333333H469.333333v255.786667h341.333334V469.333333z m170.666666 341.333334V212.48C981.333333 165.546667 942.933333 128 896 128H128C81.066667 128 42.666667 165.546667 42.666667 212.48V810.666667c0 46.933333 38.4 85.333333 85.333333 85.333333h768c46.933333 0 85.333333-38.4 85.333333-85.333333z m-85.333333 0.853333H128V212.053333h768v599.466667z","p-id":"7481"})}),view:Qe,canOperate:!0,hidden:!1,props:[{name:"type",title:"\u7c7b\u578b",description:"",supportVariable:!0,value:"jx",setter:Object(j.jsx)(Ke.SelectSetter,{dataSource:[{title:"\u7cbe\u5fc3",value:"jx"},{title:"D2",value:"d2"},,]})},{name:"css",value:":root{width: 129px}",display:"none"}]}],et=n(385),tt=(n(605),new J.a({name:"le-PanelDSL",level:"error"})),nt=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.ctx.get("dsl");return tt.log("render"),Object(j.jsx)("div",{className:"panel-dsl",children:Object(j.jsx)(et.a,{language:"json",value:JSON.stringify(e.dsl,null,2)})})}}]),n}(h.a.Component),at=Object(X.a)(nt),rt=n(380),st=n.n(rt),ot=function(){function e(){Object(o.a)(this,e),this.event=new st.a}return Object(i.a)(e,[{key:"getEvent",value:function(){return this.event}},{key:"emit",value:function(e){for(var t,n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.event).emit.apply(t,[e].concat(a))}},{key:"on",value:function(e,t){var n=this;return this.event.on(e,t),function(){n.event.removeListener(e,t)}}},{key:"off",value:function(e,t){return t?this.event.removeListener(e,t):this.event.removeAllListeners(e)}}]),e}(),it=new ot,lt=new Map;window.__ctx=lt,lt.set("event",it),lt.set("component",new Map),$e.map((function(e){lt.get("component").set(e.componentName,e)}));var ct=new f;lt.set("dsl",ct);var dt=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(i.a)(n,[{key:"componentDidMount",value:function(){lt.get("skeleton").openDockByName("component")}},{key:"render",value:function(){return Object(j.jsx)("div",{className:"app",children:Object(j.jsx)(y,{ctx:lt,topArea:[{content:Object(j.jsx)(V,{})},{align:"right",content:Object(j.jsx)(P,{})},{align:"center",content:Object(j.jsx)(ke,{})},{align:"right",content:Object(j.jsx)(H,{})},{align:"right",content:Object(j.jsx)(L,{})}],leftArea:[{name:"component",title:"\u7ec4\u4ef6\u9762\u677f",icon:"https://img.alicdn.com/imgextra/i2/O1CN01SpaA3D1dJ3gIsZltR_!!6000000003714-2-tps-128-128.png",content:Object(j.jsx)(Y,{})},{name:"outline",title:"\u5927\u7eb2\u9762\u677f",hidden:!1,icon:"https://img.alicdn.com/imgextra/i1/O1CN01ED4RnW1OVgMdOEZkH_!!6000000001711-2-tps-128-128.png",content:Object(j.jsx)(ze,{})},{name:"dsl",title:"\u6e90\u7801",align:"bottom",icon:"https://img.alicdn.com/imgextra/i3/O1CN01liE81S23dpeqriifl_!!6000000007279-2-tps-128-128.png",content:Object(j.jsx)(at,{}),width:"500px",boxType:"float"}],centerArea:[{content:Object(j.jsx)(je,{})}],rightArea:[{content:Object(j.jsx)(Q,{})}]})})}}]),n}(h.a.Component);n(606);s.a.render(Object(j.jsx)(dt,{}),document.getElementById("root"))}},[[608,1,2]]]);
//# sourceMappingURL=main.d81a06dd.chunk.js.map