{"version":3,"sources":["store/MobxStore.js","store/index.js","components/Skeleton/index.jsx","components/PanelGenImg/index.jsx","components/PanelAbout/index.jsx","components/PanelTpl/index.jsx","components/PanelLogo/index.jsx","components/PanelComponent/index.jsx","components/PanelAttribute/index.jsx","components/DesignRender/utils.js","components/DesignRender/index.jsx","components/PanelCanvasBase/components/HoverGhost/index.jsx","components/PanelCanvasBase/components/SelectGhost/line.jsx","components/PanelCanvasBase/components/SelectGhost/images/del.svg","components/PanelCanvasBase/components/SelectGhost/images/drag.svg","components/PanelCanvasBase/components/SelectGhost/images/copy.svg","components/PanelCanvasBase/components/SelectGhost/images/top.svg","components/PanelCanvasBase/components/SelectGhost/images/bottom.svg","components/PanelCanvasBase/components/SelectGhost/index.jsx","components/PanelCanvasBase/utils.jsx","components/PanelCanvasAbsolute/index.jsx","components/PanelResizeCanvas/index.jsx","components/PanelOutline/compoents/static/page.svg","components/PanelOutline/compoents/static/group.svg","components/PanelOutline/compoents/static/link.svg","components/PanelOutline/compoents/TreeNode.jsx","components/PanelOutline/compoents/static/arrow.svg","components/PanelOutline/compoents/TreeGroup.jsx","components/PanelOutline/compoents/utils.js","components/PanelOutline/compoents/Tree.jsx","components/PanelOutline/index.jsx","components/PropSetters/TextSetter/index.jsx","components/PropSetters/SelectSetter/index.jsx","components/PropSetters/index.jsx","components/ComponentBanner/Picture/setter.uploader.jsx","components/ComponentBanner/Picture/designView.jsx","components/ComponentBanner/Picture/view.jsx","components/ComponentBanner/Picture/attribute.jsx","components/ComponentBanner/Logo/designView.jsx","components/ComponentBanner/Logo/setter.uploader.jsx","components/ComponentBanner/Logo/view.jsx","components/ComponentBanner/index.jsx","components/ComponentBanner/Logo/attribute.jsx","components/PanelDSL/index.jsx","utils/SingleEventBus.js","app.jsx","index.jsx"],"names":["dsl","page","makeObservable","this","observable","setDSL","action","id","value","prop","_delPageDsl","i","length","item","splice","Array","isArray","children","findSubItem","componentItem","props","map","name","componentName","nanoid","push","_getPageDSL","_setPageDslProp","MobxStore","Skeleton","state","dockSelectName","ctx","set","handleFloatBoxOutsideClickHiden","bind","refLeftArea","leftAreaSelectItem","window","addEventListener","removeEventListener","e","contains","target","boxType","handleDockItemOnSelect","topArea","_leftArea","_rightArea","_centerArea","hidden","React","isValidElement","content","align","className","key","cloneElement","leftArea","_topArea","_bottomArea","selectContent","classnames","onClick","placement","title","src","icon","disabled","style","width","toolbarArea","centerArea","rightArea","setState","renderTopArea","ref","_","renderLeftArea","renderToolbar","renderCenterArea","renderRightArea","PureComponent","defaultProps","PanelGenImg","visible","handleOpenDialog","handleCloseDialog","handleDownload","hideMsg","message","loading","html2canvas","document","getElementById","get","containerId","allowTaint","useCORS","scale","then","canvas","refPreview","toDataURL","refDownloadA","href","download","Date","now","finally","body","click","type","onCancel","maskClosable","footer","textAlign","maxWidth","maxHeight","border","Component","PanelAbout","GithubOutlined","size","open","PanelTpl","show","list","canDel","JSON","parse","localStorage","getItem","text","setItem","stringify","filter","success","dslManager","Button","toLocaleString","overlay","info","index","Item","display","justifyContent","alignItems","stopPropagation","danger","DeleteOutlined","onOk","handleSaveTpl","cancelText","okText","onChange","prefix","autoFocus","PanelLogo","color","fontWeight","height","Logger","level","PanelComponent","refGhost","handleOnDragStart","handleOnDrag","handleOnDragEnd","dataTransfer","dataset","effectAllowed","innerText","setDragImage","clientHeight","setData","cursor","getElementsByTagName","sortComponentList","data","result","forEach","category","Object","entries","sortByGroup","onDragStart","onDragEnd","onDrag","defaultActiveKey","bordered","f","group","Panel","header","component","span","draggable","logger","PanelAttribute","componentInfo","dslInfo","offEventNodeSelect","handleEventNodeSelect","on","log","setter","setValue","setPageDslProp","observer","parseProps","context","keys","renderStyle","schema","css","replace","concat","renderSchema","components","createElement","view","toLower","__componentName","__id","appendStyle","_oldEl","innerHTML","el","setAttribute","appendChild","DesignRender","getComponentInstance","utils","HoverGhost","portalDom","ReactDOM","findDOMNode","styles","getEl","refName","textContent","nodeInfo","getBoundingClientRect","boundLeft","left","boundTop","top","offsetWidth","offsetHeight","setStyle","setName","removeChild","createPortal","x","y","sizeStyle","borderColor","SelectGhost","_node","startDrag","startMoveDir","refMask","refTopHorLine","refLeftVerLine","refRightVerLine","startPos","attractDelta","handleClickResize","handleWindowResize","throttle","handleMouseDown","handleMouseMove","handleMouseUp","handleDel","handleToBottom","handleToTop","canvasDomId","boundRight","right","bottom","opStyle","innerWidth","refOp","_setNodeStyle","emit","preventDefault","mouseX","mouseY","clientWidth","parseInt","offsetTop","offsetLeft","selectTop","selectLeft","dir","selectStyle","classList","transition","canvasPosition","elStyle","diffPos","clientX","clientY","zIndex","dealTop","dealLeft","setPos","refBottomHorLine","setTimeout","cssObj","onDel","setNode","onToTop","componentInstance","currentId","currentCss","zIndexsComponent","replaceId","replaceCss","arr","getComputedStyle","getPropertyValue","swapValue","onToBottom","canResize","onMouseDown","SvgDrag","SvgTop","SvgBottom","SvgDel","getComponentNodeByFiberNode","fiberNode","memoizedProps","return","stateNode","getDSLById","error","PanelCanvasAbsolute","Map","currentHover","currentSelect","currentDragHover","refCanvas","refHoverGhost","refSelectGhost","refDesignRender","draging","handleOnMouseOver","debounce","handleOnClickCapture","handleOnDragOver","handleOnDrop","handleOnClick","handleSelectGhostOnDragStart","handleSelectGhostOnDrag","handleSelectGhostOnDragEnd","handleSelectGhostOnDel","handleGetComponentInstance","handleSelectGhostOnToZIndex","handleOnMouseLeave","selectNodeById","hoverNodeById","handleWinOnDragOver","getData","addPageDSL","_mergeCss","join","cssText","cssParse","silent","stylesheet","parsingErrors","rules","declarations","property","fiberId","find","startsWith","node","delPageDsl","getPageDSL","onClickCapture","onDragOver","onDrop","onMouseLeave","PanelResizeCanvas","changeDomSize","canvasDOM","handleOnChange","SwapOutlined","TreeNode","renderIcon","getSvg","svgPage","svgGroup","link","svgLink","renderTitle","renderOp","currentTarget","add","onTreeNodeDragStart","remove","onTreeNodeDragEnd","TreeGroup","expanded","expandedAll","showLine","lastChild","onDragLeave","svgArrow","getNodeByIdAndDel","setNodeByIdAndInsert","Tree","dragEnterIndex","dragEnterDOM","dragPlaceholderIndex","refDragPlaceholder","hoverItem","isDraging","nextProps","onHover","elParent","parentElement","lastElementChild","enterElTop","enterElHeight","includes","insertBefore","nextElementSibling","placeholderData","__lp_tree_node_id","cloneDeep","onDragEnter","firstElementChild","onMouseOver","r","ReactDom","pageDsl","str","other","slice","sort","a","b","getZIndex","Number","match","otherProps","dataSource","Option","TextSetter","SelectSetter","file","URL","createObjectURL","showUploadList","beforeUpload","uploadOnChange","UploadOutlined","url","t","viewBox","version","xmlns","d","canOperate","description","supportVariable","jx","d2","Picture","PanelDSL","language","SingleEventBus","event","events","eventName","args","callback","removeListener","removeAllListeners","__ctx","dslInstance","DSL","App","openDockByName","render"],"mappings":"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","file":"static/js/main.731f678f.chunk.js","sourcesContent":["import { makeObservable, observable, action, computed } from \"mobx\";\nimport { nanoid } from \"nanoid\";\n\nexport default class {\n  dsl = { page: [] };\n  constructor(dsl = { page: [] }) {\n    makeObservable(this, {\n      dsl: observable,\n      setDSL: action,\n    });\n\n    this.dsl = dsl;\n  }\n\n  setDSL(dsl) {\n    this.dsl = dsl;\n  }\n\n  getDSLById(id) {}\n\n  setDSLById(id, value) {}\n\n  setDSLPropValueById(id, prop, value) {}\n\n  getDSLPropValueById(id, prop) {}\n\n  delPageDsl(id) {\n    const page = this.dsl?.page || [];\n\n    this._delPageDsl(page, id);\n  }\n\n  _delPageDsl(dsl, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        return dsl.splice(i, 1)[0];\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._delPageDsl(item.children, id);\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n\n  addPageDSL(componentItem) {\n    const props = {};\n\n    componentItem.props?.map((prop) => {\n      props[prop.name] = prop.value;\n    });\n\n    const item = {\n      id: componentItem.componentName + \"_\" + nanoid(),\n      componentName: componentItem.componentName,\n      props,\n    };\n\n    this.dsl.page.push(item);\n\n    return item;\n  }\n\n  getPageDSL(id) {\n    const page = this.dsl?.page || [];\n\n    return this._getPageDSL(page, id);\n  }\n\n  _getPageDSL(dsl, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        return item;\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._getPageDSL(item.children, id);\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n\n  setPageDslProp(name, value, id) {\n    const page = this.dsl?.page || [];\n\n    this._setPageDslProp(page, name, value, id);\n  }\n\n  _setPageDslProp(dsl, name, value, id) {\n    for (let i = 0; i < dsl?.length; i++) {\n      const item = dsl[i];\n\n      if (item?.id == id) {\n        item.props[name] = value;\n        return;\n      }\n\n      if (Array.isArray(item.children)) {\n        const findSubItem = this._setPageDslProp(\n          item.children,\n          name,\n          value,\n          id\n        );\n\n        if (findSubItem) {\n          return findSubItem;\n        }\n      }\n    }\n  }\n}\n","import MobxStore from \"./MobxStore\";\n\nexport default MobxStore;\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { Tooltip } from \"antd\";\n\nimport \"antd/dist/antd.min.css\";\nimport \"./index.less\";\n\nclass Skeleton extends React.PureComponent {\n  static defaultProps = {\n    ctx: {},\n    topArea: [],\n    leftArea: [],\n    centerArea: [],\n    rightArea: [],\n    toolbarArea: [],\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      dockSelectName: \"\",\n    };\n\n    this.props.ctx.set(\"skeleton\", this);\n\n    this.handleFloatBoxOutsideClickHiden =\n      this.handleFloatBoxOutsideClickHiden.bind(this);\n    this.refLeftArea = this.leftAreaSelectItem = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\n      \"click\",\n      this.handleFloatBoxOutsideClickHiden,\n      true\n    );\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\n      \"click\",\n      this.handleFloatBoxOutsideClickHiden,\n      true\n    );\n  }\n\n  handleFloatBoxOutsideClickHiden(e) {\n    // left 区域的不处理\n    if (this.refLeftArea?.contains(e.target)) {\n      return;\n    }\n\n    // 不是 flat 类型的不处理\n    if (this.leftAreaSelectItem?.boxType != \"float\") {\n      return;\n    }\n\n    this.handleDockItemOnSelect();\n  }\n\n  renderTopArea() {\n    const { topArea, ctx } = this.props;\n    const _leftArea = [];\n    const _rightArea = [];\n    const _centerArea = [];\n\n    topArea.map((item) => {\n      if (item.hidden || !React.isValidElement(item.content)) {\n        return;\n      }\n\n      if (item.align === \"left\" || !item.align) {\n        _leftArea.push(item);\n      } else if (item.align === \"center\") {\n        _centerArea.push(item);\n      } else if (item.align === \"right\") {\n        _rightArea.push(item);\n      }\n    });\n\n    return (\n      <>\n        <div className=\"skeleton-top-area-left\">\n          {_leftArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n        <div className=\"skeleton-top-area-center\">\n          {_centerArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n        <div className=\"skeleton-top-area-right\">\n          {_rightArea.map((item, key) =>\n            React.cloneElement(item.content, { ctx: ctx, key })\n          )}\n        </div>\n      </>\n    );\n  }\n\n  renderLeftArea() {\n    const { leftArea, ctx } = this.props;\n    const { dockSelectName } = this.state;\n    const _topArea = [];\n    const _bottomArea = [];\n    let selectContent = null;\n    this.leftAreaSelectItem = {};\n\n    leftArea.map((item) => {\n      if (item.hidden || !React.isValidElement(item.content)) {\n        return;\n      }\n\n      if (item.name === dockSelectName) {\n        selectContent = item.content;\n        this.leftAreaSelectItem = item;\n      }\n\n      if (item.align === \"top\" || !item.align) {\n        _topArea.push(item);\n      } else if (item.align === \"bottom\") {\n        _bottomArea.push(item);\n      }\n    });\n\n    return (\n      <>\n        <div className=\"skeleton-left-area-dock\">\n          <div className=\"skeleton-left-area-dock-top\">\n            {_topArea.map((item, key) => (\n              <div\n                className={classnames(\"skeleton-left-area-dock-item\", {\n                  \"skeleton-left-area-dock-item-selected\":\n                    item.name === dockSelectName,\n                })}\n                key={key}\n                onClick={() => this.handleDockItemOnSelect(item)}\n              >\n                <Tooltip placement=\"right\" title={item.title}>\n                  <img\n                    src={item.icon}\n                    className={classnames({\n                      \"skeleton-left-area-dock-item-disabled\": item.disabled,\n                    })}\n                  />\n                </Tooltip>\n              </div>\n            ))}\n          </div>\n          <div className=\"skeleton-left-area-dock-bottom\">\n            {_bottomArea.map((item, key) => (\n              <div\n                className={classnames(\"skeleton-left-area-dock-item\", {\n                  \"skeleton-left-area-dock-item-selected\":\n                    item.name === dockSelectName,\n                })}\n                key={key}\n                onClick={() => this.handleDockItemOnSelect(item)}\n              >\n                <Tooltip placement=\"right\" title={item.title}>\n                  <img\n                    src={item.icon}\n                    className={classnames({\n                      \"skeleton-left-area-dock-item-disabled\": item.disabled,\n                    })}\n                  />\n                </Tooltip>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* 下面这块可以加缓存处理 */}\n        {/* class 后面加个 prop 来判断 */}\n        {/* todo: 在这里加入 悬浮显示类型，可拖动宽度效果 */}\n        {selectContent ? (\n          <div\n            className={classnames({\n              \"skeleton-left-area-panel-fixed\":\n                this.leftAreaSelectItem?.boxType != \"float\",\n              \"skeleton-left-area-panel-float\":\n                this.leftAreaSelectItem?.boxType == \"float\",\n            })}\n            style={(() => {\n              if (this.leftAreaSelectItem?.width) {\n                return {\n                  width: this.leftAreaSelectItem.width,\n                };\n              }\n              return {};\n            })()}\n          >\n            {React.cloneElement(selectContent, { ctx: ctx })}\n          </div>\n        ) : null}\n      </>\n    );\n  }\n\n  renderToolbar() {\n    const { toolbarArea, ctx } = this.props;\n\n    if (!toolbarArea.length) {\n      return null;\n    }\n\n    return <div className=\"skeleton-center-toolbar\"></div>;\n  }\n\n  renderCenterArea() {\n    const { centerArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton-center-area\">\n        {centerArea.map((item, key) => {\n          if (item.hidden || !React.isValidElement(item.content)) {\n            return;\n          }\n\n          return React.cloneElement(item.content, { ctx: ctx, key });\n        })}\n      </div>\n    );\n  }\n\n  renderRightArea() {\n    const { rightArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton-right-area\">\n        {rightArea.map((item, key) => {\n          if (item.hidden || !React.isValidElement(item.content)) {\n            return;\n          }\n\n          return React.cloneElement(item.content, { ctx: ctx, key });\n        })}\n      </div>\n    );\n  }\n\n  handleDockItemOnSelect(item) {\n    const { dockSelectName } = this.state;\n\n    if (item?.disabled) {\n      return;\n    }\n\n    this.setState({\n      dockSelectName: item?.name === dockSelectName ? \"\" : item?.name,\n    });\n  }\n\n  openDockByName(name) {\n    this.setState({\n      dockSelectName: name,\n    });\n  }\n\n  render() {\n    const { topArea, leftArea, centerArea, rightArea, ctx } = this.props;\n\n    return (\n      <div className=\"skeleton\">\n        <div className=\"skeleton-top-area\">{this.renderTopArea()}</div>\n        <div className=\"skeleton-bottom\">\n          <div\n            className=\"skeleton-left-area\"\n            ref={(_) => (this.refLeftArea = _)}\n          >\n            {this.renderLeftArea()}\n          </div>\n          <div className=\"skeleton-center\">\n            {this.renderToolbar()}\n            {this.renderCenterArea()}\n          </div>\n          {this.renderRightArea()}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Skeleton;\n","import React from \"react\";\nimport html2canvas from \"html2canvas\";\nimport { Button, Modal, message } from \"antd\";\n\nimport \"antd/lib/button/style/index.css\";\nimport \"antd/lib/modal/style/index.css\";\nimport \"antd/lib/message/style/index.css\";\n\nclass PanelGenImg extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n    };\n\n    this.handleOpenDialog = this.handleOpenDialog.bind(this);\n    this.handleCloseDialog = this.handleCloseDialog.bind(this);\n    this.handleDownload = this.handleDownload.bind(this);\n  }\n\n  handleOpenDialog() {\n    const { ctx } = this.props;\n    const hideMsg = message.loading(\"生成中……\");\n\n    html2canvas(document.getElementById(ctx.get(\"canvas\").containerId), {\n      allowTaint: true,\n      useCORS: true,\n      scale: 4,\n    })\n      .then((canvas) => {\n        hideMsg();\n        this.setState(\n          {\n            visible: true,\n          },\n          () => {\n            this.refPreview.src = canvas.toDataURL();\n\n            this.refDownloadA.href = this.refPreview.src;\n            this.refDownloadA.download = Date.now() + \".png\";\n          }\n        );\n      })\n      .finally(() => {\n        // 触发 selectGhost 计算位置\n        window.document.body.click();\n      });\n  }\n\n  handleCloseDialog() {\n    this.setState({\n      visible: false,\n    });\n  }\n\n  handleDownload() {\n    this.refDownloadA.click();\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const { visible } = this.state;\n\n    return (\n      <div>\n        <Button type=\"primary\" onClick={this.handleOpenDialog}>\n          生成图片\n        </Button>\n\n        <Modal\n          title=\"生成图片\"\n          visible={visible}\n          onCancel={this.handleCloseDialog}\n          maskClosable={false}\n          footer={[\n            <Button type=\"primary\" onClick={this.handleDownload} key=\"1\">\n              下载图片\n            </Button>,\n          ]}\n        >\n          <a ref={(_) => (this.refDownloadA = _)}></a>\n          <div style={{ textAlign: \"center\" }}>\n            <img\n              style={{\n                maxWidth: \"100%\",\n                maxHeight: \"60vh\",\n                border: \"1px dashed \",\n              }}\n              ref={(_) => (this.refPreview = _)}\n            />\n          </div>\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default PanelGenImg;\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { GithubOutlined } from \"@ant-design/icons\";\nimport \"antd/lib/button/style/index.css\";\n\nclass PanelAbout extends React.Component {\n  render() {\n    return (\n      <div>\n        <Button\n          type=\"text\"\n          icon={<GithubOutlined size=\"large\" />}\n          onClick={() => {\n            window.open(\"http://github.com/lecepin\");\n          }}\n        ></Button>\n      </div>\n    );\n  }\n}\n\nexport default PanelAbout;\n","import React from \"react\";\nimport { Menu, Dropdown, Input, Modal, Button, message } from \"antd\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport \"antd/lib/button/style/index.css\";\n\nclass PanelTpl extends React.Component {\n  state = {\n    show: false,\n    value: \"\",\n    list: [\n      {\n        title: \"横向照片\",\n        value:\n          '{\"page\":[{\"id\":\"Picture_xJ27Wh9O3muw6haQPoKsO\",\"componentName\":\"Picture\",\"props\":{\"url\":\"https://img.alicdn.com/imgextra/i3/O1CN01oNV2HE1wltLn3iEtB_!!6000000006349-55-tps-300-200.svg\",\"css\":\":root {width:100%;z-index:0;left:0px;top:0px}\"}},{\"id\":\"Logo_pQj-9HV36c7jzCq-gDafJ\",\"componentName\":\"Logo\",\"props\":{\"type\": \"jx\",\"css\":\":root {width:129px;z-index:1;left:471px;top:322px}\"}}]}',\n        canDel: false,\n      },\n      {\n        title: \"纵向照片\",\n        value:\n          '{\"page\":[{\"id\":\"Picture_MarA0CsrJqB4bUGRkIRKi\",\"componentName\":\"Picture\",\"props\":{\"url\":\"https://img.alicdn.com/imgextra/i4/O1CN01N0gbIu1a6Hp83Ytej_!!6000000003280-55-tps-200-300.svg\",\"css\":\":root {width:400px;z-index:0;left:0px;top:0px}\"}},{\"id\":\"Logo_3Lrzrwj_iKJqPIouRipMt\",\"componentName\":\"Logo\",\"props\":{\"type\": \"jx\",\"css\":\":root {width:129px;z-index:2;left:271px;top:522px}\"}}]}',\n        canDel: false,\n      },\n    ],\n  };\n\n  componentDidMount() {\n    try {\n      const list = JSON.parse(localStorage.getItem(\"_d2_tpl_data\"));\n      this.setState({\n        list: [...this.state.list, ...list],\n      });\n    } catch (e) {}\n  }\n\n  handleCloseDialog() {\n    this.setState({ show: false });\n  }\n\n  handleSaveTpl(text, value) {\n    this.setState(\n      {\n        list: [...this.state.list, { title: text, value, canDel: true }],\n        show: false,\n      },\n      () => {\n        localStorage.setItem(\n          \"_d2_tpl_data\",\n          JSON.stringify(this.state.list.filter((item) => item.canDel))\n        );\n        message.success(\"保存模板成功\");\n      }\n    );\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const { show, value, list } = this.state;\n\n    return (\n      <div>\n        <Dropdown.Button\n          onClick={() => {\n            this.setState({\n              show: true,\n              value: new Date().toLocaleString(),\n            });\n          }}\n          overlay={\n            <Menu\n              onClick={({ key }) => {\n                dslManager.setDSL(JSON.parse(list[key].value));\n                message.info(\"已载入模板\");\n              }}\n            >\n              {list?.map((item, index) => (\n                <Menu.Item key={index}>\n                  <div\n                    style={{\n                      display: \"flex\",\n                      justifyContent: \"space-between\",\n                      alignItems: \"center\",\n                    }}\n                  >\n                    <span>{item.title}</span>\n                    <Button\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        list.splice(index, 1);\n                        this.setState({ list }, () => {\n                          localStorage.setItem(\n                            \"_d2_tpl_data\",\n                            JSON.stringify(\n                              this.state.list.filter((item) => item.canDel)\n                            )\n                          );\n                        });\n                      }}\n                      danger\n                      disabled={!item.canDel}\n                      type=\"text\"\n                      icon={<DeleteOutlined />}\n                    ></Button>\n                  </div>\n                </Menu.Item>\n              ))}\n            </Menu>\n          }\n        >\n          保存模板\n        </Dropdown.Button>\n        <Modal\n          title=\"保存模板\"\n          visible={show}\n          onCancel={() => this.handleCloseDialog()}\n          onOk={() => this.handleSaveTpl(value, JSON.stringify(dslManager.dsl))}\n          cancelText=\"取消\"\n          okText=\"保存\"\n        >\n          <Input\n            value={value}\n            onChange={(e) => this.setState({ value: e.target.value })}\n            prefix={<div>模板名称：</div>}\n            autoFocus\n          />\n        </Modal>\n      </div>\n    );\n  }\n}\n\nexport default PanelTpl;\n","import React from \"react\";\n\nclass PanelLogo extends React.Component {\n  render() {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          color: \"#f14767\",\n          fontWeight: \"bold\",\n        }}\n      >\n        <img\n          src=\"https://img.alicdn.com/imgextra/i3/O1CN01eil6G51NU1LH5f3bY_!!6000000001572-2-tps-586-90.png\"\n          height=\"30\"\n        />\n      </div>\n    );\n  }\n}\n\nexport default PanelLogo;\n","import React from \"react\";\nimport { Collapse, Row, Col } from \"antd\";\nimport Logger from \"lp-logger\";\n\nimport \"antd/dist/antd.min.css\";\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelComponent\",\n  level: \"error\",\n});\n\nfunction sortByGroup(data) {\n  const result = {};\n\n  data.forEach((item, key) => {\n    if (!result[item.category]) {\n      result[item.category] = [];\n    }\n\n    item.hidden != true && result[item.category].push(item);\n  });\n\n  return Object.entries(result)\n    .filter((item) => item[1].length)\n    .map((item, index) => ({\n      key: item[0],\n      id: index,\n      value: item[1],\n    }));\n}\n\nclass PanelComponent extends React.Component {\n  static defaultProps = {};\n\n  constructor(props) {\n    super(props);\n\n    this.refGhost = null;\n\n    this.handleOnDragStart = this.handleOnDragStart.bind(this);\n    this.handleOnDrag = this.handleOnDrag.bind(this);\n    this.handleOnDragEnd = this.handleOnDragEnd.bind(this);\n  }\n\n  handleOnDragStart({ target, dataTransfer }) {\n    if (target.dataset[\"type\"] != \"component\") {\n      return;\n    }\n\n    if (!this.refGhost) {\n      return;\n    }\n\n    dataTransfer.effectAllowed = \"move\";\n\n    this.refGhost.innerText = target.dataset[\"title\"];\n    dataTransfer.setDragImage(this.refGhost, 0, this.refGhost.clientHeight / 2);\n    dataTransfer.setData(\"componentName\", target.dataset[\"componentName\"]);\n  }\n\n  handleOnDrag({ target }) {\n    target.style.cursor = \"unset\";\n    window.document.getElementsByTagName(\"html\")[0].style.cursor = \"move\";\n  }\n\n  handleOnDragEnd({ target }) {\n    window.document.getElementsByTagName(\"html\")[0].style.cursor = \"default\";\n    target.style.cursor = \"grab\";\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const sortComponentList = sortByGroup(ctx.get(\"component\"));\n\n    return (\n      <div\n        className=\"panel-component\"\n        onDragStart={this.handleOnDragStart}\n        onDragEnd={this.handleOnDragEnd}\n        onDrag={this.handleOnDrag}\n      >\n        <div className=\"panel-component-ghost-hidden\">\n          <div\n            className=\"panel-component-ghost\"\n            ref={(_) => (this.refGhost = _)}\n          ></div>\n        </div>\n        <Collapse\n          defaultActiveKey={sortComponentList.map((item) => item.id)}\n          bordered={false}\n          onChange={(f) => f}\n        >\n          {sortComponentList.map((group) => (\n            <Collapse.Panel header={group.key} key={group.id}>\n              <Row>\n                {group.value.map((component, key) => (\n                  <Col span={6} key={key}>\n                    <div\n                      className=\"panel-component-item\"\n                      draggable\n                      title={component.title}\n                      data-type=\"component\"\n                      data-title={component.title}\n                      data-component-name={component.componentName}\n                    >\n                      {/* <img\n                        draggable=\"false\"\n                        className=\"panel-component-item-img\"\n                        src={component.icon}\n                      /> */}\n                      {component.icon}\n                      <div className=\"panel-component-item-title\">\n                        {component.title}\n                      </div>\n                    </div>\n                  </Col>\n                ))}\n              </Row>\n            </Collapse.Panel>\n          ))}\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nexport default PanelComponent;\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport { observer } from \"mobx-react\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelAttribute\",\n  level: \"error\",\n});\n\nclass PanelAttribute extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      componentInfo: null,\n      dslInfo: null,\n    };\n\n    this.offEventNodeSelect = null;\n    this.handleEventNodeSelect = this.handleEventNodeSelect.bind(this);\n  }\n\n  componentDidMount() {\n    const { ctx } = this.props;\n\n    this.offEventNodeSelect = ctx\n      ?.get(\"event\")\n      ?.on?.(\"le.node.select\", this.handleEventNodeSelect);\n  }\n\n  componentWillUnmount() {\n    this.offEventNodeSelect?.();\n  }\n\n  handleEventNodeSelect(e) {\n    logger.log(\"handleEventNodeSelect\", e);\n    this.setState({\n      componentInfo: e?.componentInfo,\n      dslInfo: e?.dslInfo,\n    });\n  }\n\n  render() {\n    const { componentInfo, dslInfo } = this.state;\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    logger.log(\"render\");\n\n    if (!componentInfo) {\n      return (\n        <div className=\"panel-attribute\">\n          <div className=\"panel-attribute-noselect\">请在左侧画布选择</div>\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"panel-attribute\">\n        <div className=\"panel-attribute-name\">{componentInfo?.title}</div>\n        <div className=\"panel-attribute-content\">\n          {componentInfo?.props\n            ?.filter((item) => item.display != \"none\")\n            ?.map((item, index) => (\n              <div key={index} className=\"panel-attribute-item\">\n                <div className=\"panel-attribute-item-title\">{item.title}</div>\n                <div className=\"panel-attribute-item-content\">\n                  {React.cloneElement(item.setter, {\n                    value: dslInfo.props[item.name],\n                    setValue: (value) =>\n                      dslManager.setPageDslProp(item.name, value, dslInfo.id),\n                  })}\n                </div>\n              </div>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelAttribute);\n","import React from \"react\";\nimport { toLower } from \"lodash\";\n\n// 递归渲染 Schema\nfunction renderStyle(schema) {\n  if (!schema) {\n    return \"\";\n  }\n\n  const result = [];\n\n  (Array.isArray(schema) ? schema : [schema]).map((item) => {\n    if (item?.props?.css && item.id) {\n      result.push({\n        id: item.id,\n        css: item.props.css.replace(\":root\", `.${item.id}`),\n      });\n      result.concat(renderStyle(item.children));\n    }\n  });\n\n  return result;\n}\n\n// 解析props\nfunction parseProps(props, context) {\n  const result = {};\n\n  Object.keys(props).map((key) => {\n    result[key] = props[key];\n  });\n\n  return result;\n}\n\n// 渲染 Schema\nfunction renderSchema(schema, components, context, props = {}) {\n  if (!schema) {\n    return null;\n  }\n\n  return (Array.isArray(schema) ? schema : [schema]).map((item, key) => {\n    if (item.componentName) {\n      // 如果 children 只是一个字符串的话，不进行任何包装\n      return React.createElement(\n        components?.get(item.componentName)?.view ||\n          toLower(item.componentName),\n        {\n          ...parseProps(item.props || {}, context),\n          className: item.id,\n          key,\n          __componentName: item.componentName,\n          __id: item.id,\n          ...props,\n        },\n        renderSchema(item.children, components, context, props)\n      );\n    }\n\n    return item; // 直接反回字符串\n  });\n}\n\n// 添加样式\nfunction appendStyle({ id, css }) {\n  const _oldEl = document.getElementById(\"style-\" + id);\n  if (_oldEl) {\n    _oldEl.innerHTML = css;\n    return;\n  }\n\n  const el = document.createElement(\"style\");\n\n  el.setAttribute(\"type\", \"text/css\");\n  el.setAttribute(\"id\", \"style-\" + id);\n  el.innerHTML = css;\n\n  document.getElementsByTagName(\"head\")[0].appendChild(el);\n}\n\nexport default {\n  renderStyle,\n  renderSchema,\n  appendStyle,\n};\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport classnames from \"classnames\";\nimport { observer } from \"mobx-react\";\nimport utils from \"./utils\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-DesignRender\",\n  level: \"error\",\n});\nclass DesignRender extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {}\n\n  render() {\n    logger.log(\"render\");\n    const {\n      dsl,\n      component,\n      style = {},\n      className,\n      getComponentInstance,\n    } = this.props;\n\n    // todo: clear unuse style\n    utils.renderStyle(dsl).map((item) => utils.appendStyle(item));\n\n    return (\n      <div className={classnames(\"design-render\", className)} style={style}>\n        {utils.renderSchema(dsl, component, this, {\n          ref: getComponentInstance,\n        })}\n      </div>\n    );\n  }\n}\n\nexport default observer(DesignRender);\nexport { utils };\n","import React from \"react\";\nimport ReactDOM, { createPortal } from \"react-dom\";\n\nimport \"./index.less\";\n\nexport default class HoverGhost extends React.PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.portalDom = document.createElement(\"div\");\n    document.body.appendChild(this.portalDom);\n  }\n  getEl() {\n    return ReactDOM.findDOMNode(this.ref);\n  }\n\n  setStyle(styles) {\n    const el = this.getEl();\n\n    Object.entries(styles).map((item) => {\n      el.style[item[0]] = item[1];\n    });\n  }\n\n  setName(text) {\n    const el = ReactDOM.findDOMNode(this.refName);\n\n    el.textContent = text;\n  }\n\n  setNode(el, nodeInfo) {\n    if (!el) {\n      this.setStyle({\n        display: \"none\",\n      });\n\n      return;\n    }\n\n    const {\n      left: boundLeft,\n      top: boundTop,\n      width: boundWidth,\n      height: boundHeight,\n    } = el.getBoundingClientRect();\n    const width = el.offsetWidth;\n    const height = el.offsetHeight;\n    // const centerPointer = {\n    //   x: boundLeft + boundWidth / 2,\n    //   y: boundTop + boundHeight / 2,\n    // };\n\n    // 要获取未旋转时的 left/top ?\n    // const left = centerPointer.x - width / 2;\n    // const top = centerPointer.y - height / 2;\n\n    this.setStyle({\n      left: boundLeft + \"px\",\n      top: boundTop + \"px\",\n      width: width + \"px\",\n      height: height + \"px\",\n      display: \"block\",\n      // transform: ,\n    });\n    this.setName(nodeInfo.componentInfo.title);\n  }\n\n  componentWillUnmount() {\n    document.body.removeChild(this.portalDom);\n  }\n\n  render() {\n    return createPortal(\n      <div\n        ref={(_) => (this.ref = _)}\n        className=\"panel-canvas-base-hover-ghost\"\n      >\n        <div\n          ref={(_) => (this.refName = _)}\n          className=\"panel-canvas-base-hover-ghost-name\"\n        ></div>\n      </div>,\n      this.portalDom\n    );\n  }\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./line.less\";\n\nexport default class extends React.Component {\n  static defaultProps = {\n    type: \"hor\", // ver\n    color: \"#f759ab\",\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      size: \"0\",\n      x: \"0\",\n      y: \"0\",\n    };\n  }\n\n  setPos({ size, x, y }) {\n    this.setState({\n      size,\n      x,\n      y,\n    });\n  }\n\n  render() {\n    const { type, color } = this.props;\n    const { size, x, y } = this.state;\n    const sizeStyle = {\n      left: x,\n      top: y,\n      borderColor: color,\n    };\n\n    if (type == \"hor\") {\n      sizeStyle.width = size;\n    } else {\n      sizeStyle.height = size;\n    }\n\n    return (\n      <div\n        className={classnames(\"reference-line\", \"reference-line-\" + type)}\n        style={sizeStyle}\n      ></div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/del.e6962b35.svg\";","export default __webpack_public_path__ + \"static/media/drag.fa656f9f.svg\";","export default __webpack_public_path__ + \"static/media/copy.8788c23f.svg\";","export default __webpack_public_path__ + \"static/media/top.b88164e7.svg\";","export default __webpack_public_path__ + \"static/media/bottom.d38bfaa6.svg\";","import React from \"react\";\nimport ReactDOM, { createPortal } from \"react-dom\";\nimport { throttle } from \"lodash\";\nimport Logger from \"lp-logger\";\nimport Line from \"./line\";\n\nimport SvgDel from \"./images/del.svg\";\nimport SvgCopy from \"./images/copy.svg\";\nimport SvgDrag from \"./images/drag.svg\";\nimport SvgTop from \"./images/top.svg\";\nimport SvgBottom from \"./images/bottom.svg\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-SelectGhost\",\n  level: \"error\",\n});\n\nexport default class SelectGhost extends React.PureComponent {\n  static defaultProps = {\n    canResize: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._node = this.startDrag = this.startMoveDir = null;\n    this.refMask =\n      this.ref =\n      this.refTopHorLine =\n      this.refLeftVerLine =\n      this.refRightVerLine =\n        null;\n    this.startPos = {};\n    this.attractDelta = 10;\n\n    this.handleClickResize = this.handleClickResize.bind(this);\n    this.handleWindowResize = throttle(this.handleClickResize.bind(this), 300);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleDel = this.handleDel.bind(this);\n    this.handleToBottom = this.handleToBottom.bind(this);\n    this.handleToTop = this.handleToTop.bind(this);\n\n    this.portalDom = document.createElement(\"div\");\n    document.body.appendChild(this.portalDom);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"click\", this.handleClickResize);\n    window.addEventListener(\"resize\", this.handleWindowResize);\n    window.addEventListener(\"keyup\", this.handleWindowResize);\n\n    window.addEventListener(\"mouseup\", this.handleMouseUp);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"click\", this.handleClickResize);\n    window.removeEventListener(\"resize\", this.handleWindowResize);\n    window.addEventListener(\"keyup\", this.handleWindowResize);\n    window.removeEventListener(\"mouseup\", this.handleMouseUp);\n\n    document.body.removeChild(this.portalDom);\n  }\n\n  getEl() {\n    return ReactDOM.findDOMNode(this.ref);\n  }\n\n  setStyle(styles) {\n    const el = this.getEl();\n\n    el &&\n      Object.entries(styles).map((item) => {\n        el.style[item[0]] = item[1];\n      });\n  }\n\n  setName(text) {\n    const el = ReactDOM.findDOMNode(this.refName);\n\n    el.textContent = text;\n  }\n\n  _setNodeStyle() {\n    const el = this._node?.el;\n    const { canvasDomId } = this.props;\n\n    if (!el) {\n      this.setStyle({\n        display: \"none\",\n      });\n\n      return;\n    }\n\n    const canvasDom = document.getElementById(canvasDomId);\n    const canvasPosition = canvasDom.getBoundingClientRect();\n    const {\n      left: boundLeft,\n      top: boundTop,\n      right: boundRight,\n      bottom: boundBottom,\n      width: boundWidth,\n      height: boundHeight,\n    } = el.getBoundingClientRect();\n    const width = el.offsetWidth;\n    const height = el.offsetHeight;\n    // const centerPointer = {\n    //   x: boundLeft + boundWidth / 2,\n    //   y: boundTop + boundHeight / 2,\n    // };\n\n    // 要获取未旋转时的 left/top ?\n    // const left = centerPointer.x - width / 2;\n    // const top = centerPointer.y - height / 2;\n\n    // todo： 滚动的处理\n    this.setStyle({\n      left: boundLeft + \"px\",\n      top: boundTop + \"px\",\n      width: width + \"px\",\n      height: height + \"px\",\n      display: \"block\",\n      // transform: ,\n    });\n\n    // op操作区位置重置\n    const opHeight = 30;\n    const opStyle = {\n      left: \"unset\",\n      top: \"unset\",\n      right: \"unset\",\n      bottom: \"unset\",\n    };\n\n    if (boundTop < opHeight) {\n      opStyle.bottom = -1 * opHeight + \"px\";\n    } else if (boundBottom < opHeight) {\n      opStyle.top = -1 * opHeight + \"px\";\n    } else {\n      opStyle.top = -1 * opHeight + \"px\";\n    }\n    if (boundLeft < 0) {\n      opStyle.right = 0;\n    } else if (boundRight > window.innerWidth) {\n      opStyle.left = 0;\n    } else {\n      opStyle.right = 0;\n    }\n\n    Object.entries(opStyle).map(\n      ([name, value]) => (this.refOp.style[name] = value)\n    );\n  }\n\n  // todo: 优化只有resize canvas才触发\n  // 解决canvas变化，select没有同步大小\n  handleClickResize() {\n    this._setNodeStyle();\n  }\n\n  setNode(nodeInfo) {\n    const { ctx } = this.props;\n\n    ctx?.get(\"event\")?.emit(\"le.node.select\", nodeInfo);\n    this._node = nodeInfo;\n    this._setNodeStyle();\n  }\n\n  handleMouseDown(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    const { onDragStart } = this.props;\n    const el = this._node?.el;\n\n    this.startPos = {\n      // 开始位置需要取真正边上的位置，改用 clientX，来实现配合 getBoundingClientRect 计算真实位置\n      mouseX: e.target.getBoundingClientRect().x + e.target.offsetWidth / 2,\n      mouseY: e.target.getBoundingClientRect().y + +e.target.offsetHeight / 2,\n      // ? margin\n      width: this.ref.clientWidth,\n      height: this.ref.clientHeight,\n      top: parseInt(this.ref.offsetTop) || 0,\n      left: parseInt(this.ref.offsetLeft) || 0,\n      selectTop: parseInt(el.offsetTop) || 0,\n      selectLeft: parseInt(el.offsetLeft) || 0,\n      dir: e.target.dataset.dir,\n      selectStyle: el.style,\n    };\n\n    window.addEventListener(\"mousemove\", this.handleMouseMove);\n\n    // 按下拖拽\n    if (e.target.classList.contains(\"panel-canvas-base-select-ghost-drag\")) {\n      onDragStart?.();\n      this.startDrag = true;\n      // 防止动画干扰拖动\n      el.style.transition = \"none\";\n      return;\n    }\n\n    // 大小调整\n    if (e.target.classList.contains(\"panel-canvas-base-select-ghost-block\")) {\n      this.startMoveDir = true;\n      // 防止动画干扰拖动\n      el.style.transition = \"none\";\n      return;\n    }\n  }\n\n  handleMouseMove(e) {\n    const { onDrag, canvasDomId } = this.props;\n    const el = this._node?.el;\n    const canvasDom = document.getElementById(canvasDomId);\n    const canvasPosition = canvasDom.getBoundingClientRect();\n    const elStyle = {};\n    let diffPos = {\n      left: e.clientX - this.startPos.mouseX,\n      top: e.clientY - this.startPos.mouseY,\n    };\n\n    // 拖动\n    if (this.startDrag) {\n      this.refMask.style.display = \"block\";\n      this.ref.style.zIndex = 99999;\n\n      let dealTop = this.startPos.top + diffPos.top;\n      let dealLeft = this.startPos.left + diffPos.left;\n\n      // 吸附判断 顶部\n      if (\n        dealTop >= -1 * this.attractDelta + canvasPosition.top &&\n        dealTop <= this.attractDelta + canvasPosition.top\n      ) {\n        this.ref.style.top = canvasPosition.top + \"px\";\n        elStyle.top = 0;\n        this.refTopHorLine.setPos({\n          size: canvasPosition.width + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      }\n      // 吸附判断 底部\n      else if (\n        dealTop + this.startPos.height >=\n          -1 * this.attractDelta + canvasPosition.bottom &&\n        dealTop + this.startPos.height <=\n          this.attractDelta + canvasPosition.bottom\n      ) {\n        this.ref.style.top =\n          canvasPosition.bottom - this.startPos.height + \"px\";\n        elStyle.top = canvasPosition.height - this.startPos.height + \"px\";\n        this.refBottomHorLine.setPos({\n          size: canvasPosition.width + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.bottom + \"px\",\n        });\n      } else {\n        this.ref.style.top = this.startPos.top + diffPos.top + \"px\";\n        elStyle.top = this.startPos.selectTop + diffPos.top + \"px\";\n\n        this.refTopHorLine.setPos({ size: 0 });\n        this.refBottomHorLine.setPos({ size: 0 });\n      }\n\n      // 吸附判断 左侧\n      if (\n        dealLeft >= -1 * this.attractDelta + canvasPosition.left &&\n        dealLeft <= this.attractDelta + canvasPosition.left\n      ) {\n        this.ref.style.left = canvasPosition.left + \"px\";\n        elStyle.left = 0;\n        this.refLeftVerLine.setPos({\n          size: canvasPosition.height + \"px\",\n          x: canvasPosition.left + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      }\n      // 吸附判断 右侧\n      else if (\n        dealLeft + this.startPos.width >=\n          -1 * this.attractDelta + canvasPosition.right &&\n        dealLeft + this.startPos.width <=\n          this.attractDelta + canvasPosition.right\n      ) {\n        this.ref.style.left = canvasPosition.right - this.startPos.width + \"px\";\n        elStyle.left = canvasPosition.width - this.startPos.width + \"px\";\n        this.refRightVerLine.setPos({\n          size: canvasPosition.height + \"px\",\n          x: canvasPosition.right + \"px\",\n          y: canvasPosition.top + \"px\",\n        });\n      } else {\n        this.ref.style.left = this.startPos.left + diffPos.left + \"px\";\n        elStyle.left = this.startPos.selectLeft + diffPos.left + \"px\";\n\n        this.refLeftVerLine.setPos({ size: 0 });\n        this.refRightVerLine.setPos({ size: 0 });\n      }\n\n      el.style.left = elStyle.left;\n      el.style.top = elStyle.top;\n\n      onDrag?.(elStyle);\n      return;\n    }\n\n    // 大小调整\n    if (this.startMoveDir) {\n      // 方向判断\n      if (this.startPos.dir[0] == \"t\") {\n        // 往上\n        {\n          // 吸顶判断 顶部\n          let dealTop = this.startPos.top + diffPos.top;\n          if (\n            dealTop >= -1 * this.attractDelta + canvasPosition.top &&\n            dealTop <= this.attractDelta + canvasPosition.top\n          ) {\n            this.ref.style.top = canvasPosition.top + \"px\";\n            this.ref.style.height =\n              this.startPos.height -\n              (canvasPosition.top - this.startPos.mouseY) +\n              \"px\";\n            elStyle.top = 0 + \"px\";\n            elStyle.height =\n              this.startPos.height -\n              (canvasPosition.top - this.startPos.mouseY) +\n              \"px\";\n\n            this.refTopHorLine.setPos({\n              size: canvasPosition.width + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.top = this.startPos.top + diffPos.top + \"px\";\n            this.ref.style.height = this.startPos.height - diffPos.top + \"px\";\n            elStyle.top = this.startPos.selectTop + diffPos.top + \"px\";\n            elStyle.height = this.startPos.height - diffPos.top + \"px\";\n\n            this.refTopHorLine.setPos({ size: 0 });\n          }\n        }\n      } else if (this.startPos.dir[0] == \"b\") {\n        // 往下\n        {\n          // 吸顶判断 顶部\n          let dealTop = this.startPos.top + diffPos.top;\n          if (\n            dealTop + this.startPos.height >=\n              -1 * this.attractDelta + canvasPosition.bottom &&\n            dealTop + this.startPos.height <=\n              this.attractDelta + canvasPosition.bottom\n          ) {\n            this.ref.style.height =\n              this.startPos.height +\n              (canvasPosition.bottom - this.startPos.mouseY) +\n              \"px\";\n            elStyle.height =\n              this.startPos.height +\n              (canvasPosition.bottom - this.startPos.mouseY) +\n              \"px\";\n\n            this.refBottomHorLine.setPos({\n              size: canvasPosition.width + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.bottom + \"px\",\n            });\n          } else {\n            this.ref.style.height = this.startPos.height + diffPos.top + \"px\";\n            elStyle.height = this.startPos.height + diffPos.top + \"px\";\n\n            this.refBottomHorLine.setPos({ size: 0 });\n          }\n        }\n      }\n      if (this.startPos.dir[1] == \"l\") {\n        // 往左\n        {\n          let dealLeft = this.startPos.left + diffPos.left;\n\n          // 吸顶判断 左部\n          if (\n            dealLeft >= -1 * this.attractDelta + canvasPosition.left &&\n            dealLeft <= this.attractDelta + canvasPosition.left\n          ) {\n            this.ref.style.left = canvasPosition.left + \"px\";\n            this.ref.style.width =\n              this.startPos.width -\n              (canvasPosition.left - this.startPos.mouseX) +\n              \"px\";\n            elStyle.left = 0;\n            elStyle.width =\n              this.startPos.width -\n              (canvasPosition.left - this.startPos.mouseX) +\n              \"px\";\n\n            this.refLeftVerLine.setPos({\n              size: canvasPosition.height + \"px\",\n              x: canvasPosition.left + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.left = this.startPos.left + diffPos.left + \"px\";\n            this.ref.style.width = this.startPos.width - diffPos.left + \"px\";\n            elStyle.left = this.startPos.selectLeft + diffPos.left + \"px\";\n            elStyle.width = this.startPos.width - diffPos.left + \"px\";\n\n            this.refLeftVerLine.setPos({\n              size: 0,\n            });\n          }\n        }\n      } else if (this.startPos.dir[1] == \"r\") {\n        // 往右\n        {\n          let dealLeft = this.startPos.left + diffPos.left;\n\n          // 吸顶判断 右部\n          if (\n            dealLeft + this.startPos.width >=\n              -1 * this.attractDelta + canvasPosition.right &&\n            dealLeft + this.startPos.width <=\n              this.attractDelta + canvasPosition.right\n          ) {\n            this.ref.style.width =\n              this.startPos.width +\n              (canvasPosition.right - this.startPos.mouseX) +\n              \"px\";\n            elStyle.width =\n              this.startPos.width +\n              (canvasPosition.right - this.startPos.mouseX) +\n              \"px\";\n\n            this.refRightVerLine.setPos({\n              size: canvasPosition.height + \"px\",\n              x: canvasPosition.right + \"px\",\n              y: canvasPosition.top + \"px\",\n            });\n          } else {\n            this.ref.style.width = this.startPos.width + diffPos.left + \"px\";\n            elStyle.width = this.startPos.width + diffPos.left + \"px\";\n\n            this.refRightVerLine.setPos({ size: 0 });\n          }\n        }\n      }\n\n      Object.entries(elStyle).filter(([key, value]) => (el.style[key] = value));\n    }\n  }\n\n  handleMouseUp(e) {\n    e.stopPropagation();\n    e.preventDefault();\n\n    window.removeEventListener(\"mousemove\", this.handleMouseMove);\n\n    const { onDragEnd } = this.props;\n\n    // click的执行顺序问题\n    (this.startDrag || this.startMoveDir) &&\n      setTimeout(() => {\n        const cssObj = {\n          left: (this._node?.el?.offsetLeft || 0) + \"px\",\n          top: (this._node?.el?.offsetTop || 0) + \"px\",\n        };\n\n        this._node?.el?.style?.width &&\n          (cssObj.width = this._node?.el?.style?.width);\n        this._node?.el?.style?.height &&\n          (cssObj.height = this._node?.el?.style?.height);\n\n        // reset el style\n        this._node.el.style = this.startPos.selectStyle;\n        onDragEnd?.(cssObj, this._node);\n      });\n\n    // 重置标志位\n    this.startDrag = this.startMoveDir = false;\n    this.refMask.style.display = \"none\";\n    this.ref.style.zIndex = 800;\n    this.refTopHorLine.setPos({ size: 0 });\n    this.refBottomHorLine.setPos({ size: 0 });\n    this.refLeftVerLine.setPos({ size: 0 });\n    this.refRightVerLine.setPos({ size: 0 });\n  }\n\n  handleDel() {\n    const { ctx, onDel } = this.props;\n\n    ctx?.get(\"event\")?.emit(\"le.node.select\");\n    onDel?.(this._node);\n    this.setNode(null);\n  }\n\n  handleToTop() {\n    const { ctx, onToTop } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const { componentInstance } = ctx.get(\"canvas\");\n    const currentId = this._node.dslInfo.id;\n    const currentCss = this._node.dslInfo.props.css;\n    const zIndexsComponent = {};\n    let replaceId = null;\n    let replaceCss = \"\";\n\n    dslManager.dsl.page.map(({ id, props }, index, arr) => {\n      const ref = componentInstance.get(id);\n      const el = ReactDOM.findDOMNode(ref);\n      const zIndex = getComputedStyle(el).getPropertyValue(\"z-index\");\n\n      if (zIndex == arr.length - 1) {\n        replaceId = id;\n        replaceCss = props.css;\n      }\n\n      zIndexsComponent[id] = zIndex;\n    });\n\n    if (!(zIndexsComponent[currentId] == dslManager.dsl.page.length - 1)) {\n      onToTop?.({\n        currentId,\n        currentCss,\n        replaceId,\n        replaceCss,\n        value: dslManager.dsl.page.length - 1,\n        swapValue: getComputedStyle(this._node.el).getPropertyValue(\"z-index\"),\n      });\n    }\n  }\n\n  handleToBottom() {\n    const { ctx, onToBottom } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const { componentInstance } = ctx.get(\"canvas\");\n    const currentId = this._node.dslInfo.id;\n    const currentCss = this._node.dslInfo.props.css;\n    const zIndexsComponent = {};\n    let replaceId = null;\n    let replaceCss = \"\";\n\n    dslManager.dsl.page.map(({ id, props }, index, arr) => {\n      const ref = componentInstance.get(id);\n      const el = ReactDOM.findDOMNode(ref);\n      const zIndex = getComputedStyle(el).getPropertyValue(\"z-index\");\n\n      if (zIndex == 0) {\n        replaceId = id;\n        replaceCss = props.css;\n      }\n\n      zIndexsComponent[id] = zIndex;\n    });\n\n    if (!(zIndexsComponent[currentId] == 0)) {\n      onToBottom?.({\n        currentId,\n        currentCss,\n        replaceId,\n        replaceCss,\n        value: 0,\n        swapValue: getComputedStyle(this._node.el).getPropertyValue(\"z-index\"),\n      });\n    }\n  }\n\n  render() {\n    const { ctx, canResize, onDrag, onDragStart, onDragEnd, onDel } =\n      this.props;\n\n    return createPortal(\n      <>\n        <div\n          ref={(_) => (this.ref = _)}\n          className=\"panel-canvas-base-select-ghost\"\n          onMouseDown={this.handleMouseDown}\n        >\n          {canResize ? (\n            <>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tl\"\n                data-dir=\"tl\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tm\"\n                data-dir=\"tm\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-tr\"\n                data-dir=\"tr\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-ml\"\n                data-dir=\"ml\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-mr\"\n                data-dir=\"mr\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bl\"\n                data-dir=\"bl\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-bm\"\n                data-dir=\"bm\"\n              ></div>\n              <div\n                className=\"panel-canvas-base-select-ghost-block panel-canvas-base-select-ghost-br\"\n                data-dir=\"br\"\n              ></div>\n            </>\n          ) : null}\n\n          <div className=\"panel-canvas-base-select-ghost-rotate\"></div>\n          {/* todo: 边界判断 位置放置 */}\n          <div\n            className=\"panel-canvas-base-select-ghost-op\"\n            ref={(_) => (this.refOp = _)}\n          >\n            <div className=\"panel-canvas-base-select-ghost-drag\" title=\"拖动\">\n              <img src={SvgDrag} />\n            </div>\n            {/* <div className=\"panel-canvas-base-select-ghost-copy\" title=\"复制\">\n              <img src={SvgCopy} />\n            </div> */}\n            <div\n              className=\"panel-canvas-base-select-ghost-top\"\n              title=\"置顶\"\n              onClick={this.handleToTop}\n            >\n              <img src={SvgTop} />\n            </div>\n            <div\n              className=\"panel-canvas-base-select-ghost-bottom\"\n              title=\"置底\"\n              onClick={this.handleToBottom}\n            >\n              <img src={SvgBottom} />\n            </div>\n            <div\n              className=\"panel-canvas-base-select-ghost-del\"\n              title=\"删除\"\n              onClick={this.handleDel}\n            >\n              <img src={SvgDel} />\n            </div>\n          </div>\n        </div>\n        <div\n          ref={(_) => (this.refMask = _)}\n          className=\"panel-canvas-base-select-ghost-mask\"\n        ></div>\n        <Line ref={(_) => (this.refTopHorLine = _)} />\n        <Line ref={(_) => (this.refBottomHorLine = _)} />\n        <Line type=\"ver\" ref={(_) => (this.refLeftVerLine = _)} />\n        <Line type=\"ver\" ref={(_) => (this.refRightVerLine = _)} />\n      </>,\n      this.portalDom\n    );\n  }\n}\n","import Logger from \"lp-logger\";\nimport ReactDOM from \"react-dom\";\n\nconst logger = new Logger({\n  name: \"le-PanelCanvasBase-utils\",\n  level: \"error\",\n});\n\nfunction getComponentNodeByFiberNode(fiberNode, component, dsl) {\n  const componentInfo =\n    component.get(fiberNode?.memoizedProps?.__componentName) || null;\n\n  if (!componentInfo && fiberNode.return) {\n    return getComponentNodeByFiberNode(fiberNode.return, component, dsl);\n  }\n\n  try {\n    return {\n      componentInfo,\n      el: ReactDOM.findDOMNode(fiberNode.stateNode),\n      dslInfo: getDSLById(fiberNode.stateNode.props.__id, dsl),\n    };\n  } catch (error) {\n    return null;\n  }\n}\n\nfunction getDSLById(id, dsl) {\n  for (let i = 0; i < dsl.length; i++) {\n    const item = dsl[i];\n\n    if (item.id == id) {\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      const findSubItem = getDSLById(id, item.children);\n\n      if (findSubItem) {\n        return findSubItem;\n      }\n    }\n  }\n\n  return null;\n}\n\nexport { getComponentNodeByFiberNode };\n","import React from \"react\";\nimport { findDOMNode } from \"react-dom\";\nimport { observer } from \"mobx-react\";\nimport DesignRender from \"./../DesignRender\";\nimport Logger from \"lp-logger\";\nimport css from \"css\";\nimport { debounce, throttle } from \"lodash\";\nimport { utils, HoverGhost, SelectGhost } from \"./../PanelCanvasBase\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelCanvasAbsolute\",\n  level: \"error\",\n});\n\nclass PanelCanvasAbsolute extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.containerId = \"panel-canvas-absolute\";\n    this.componentInstance = new Map();\n    this.currentHover =\n      this.currentSelect =\n      this.currentDragHover =\n      this.refCanvas =\n      this.refHoverGhost =\n      this.refSelectGhost =\n      this.refDesignRender =\n      this.draging =\n        null;\n    this.handleOnMouseOver = debounce(this.handleOnMouseOver.bind(this), 50);\n    this.handleOnClickCapture = this.handleOnClickCapture.bind(this);\n    this.handleOnDragOver = throttle(this.handleOnDragOver.bind(this), 300);\n    this.handleOnDrop = this.handleOnDrop.bind(this);\n    this.handleOnClick = this.handleOnClick.bind(this);\n    this.handleSelectGhostOnDragStart =\n      this.handleSelectGhostOnDragStart.bind(this);\n    this.handleSelectGhostOnDrag = this.handleSelectGhostOnDrag.bind(this);\n    this.handleSelectGhostOnDragEnd =\n      this.handleSelectGhostOnDragEnd.bind(this);\n    this.handleSelectGhostOnDel = this.handleSelectGhostOnDel.bind(this);\n    this.handleGetComponentInstance =\n      this.handleGetComponentInstance.bind(this);\n    this.handleSelectGhostOnToZIndex =\n      this.handleSelectGhostOnToZIndex.bind(this);\n    this.handleOnMouseLeave = this.handleOnMouseLeave.bind(this);\n  }\n\n  componentDidMount() {\n    const { ctx } = this.props;\n\n    ctx.set(\"canvas\", {\n      containerId: this.containerId,\n      componentInstance: this.componentInstance,\n      selectNodeById: this.selectNodeById.bind(this),\n      hoverNodeById: this.hoverNodeById.bind(this),\n    });\n    window.document.addEventListener(\"mousemove\", this.handleOnMouseOver);\n    window.document.addEventListener(\"dragover\", this.handleWinOnDragOver);\n  }\n\n  componentWillUnmount() {\n    window.document.removeEventListener(\"mousemove\", this.handleOnMouseOver);\n    window.document.removeEventListener(\"dragover\", this.handleWinOnDragOver);\n  }\n\n  handleWinOnDragOver(e) {\n    e.preventDefault();\n  }\n\n  handleOnDragOver({ target }) {\n    if (this.currentDragHover == target) {\n      return;\n    }\n\n    this.currentDragHover = target;\n    // console.log(\"handleOnDragOver\", target);\n  }\n\n  handleOnDrop({ dataTransfer }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const componentItem = ctx\n      .get(\"component\")\n      .get(dataTransfer.getData(\"componentName\"));\n\n    if (!componentItem) {\n      return;\n    }\n\n    const { id } = dslManager.addPageDSL(componentItem);\n    setTimeout(() => {\n      const { dslInfo } = this.selectNodeById(id);\n\n      const cssObj = this._mergeCss(dslInfo.props.css, {\n        \"z-index\": dslManager.dsl.page.length - 1,\n      });\n      dslManager.setPageDslProp(\n        \"css\",\n        `:root {${Object.keys(cssObj)\n          .map((name) => `${name}:${cssObj[name]}`)\n          .join(\";\")}}`,\n        dslInfo.id\n      );\n    }, 300);\n    // console.log(\"handleOnDrop\", dataTransfer.getData(\"componentName\"));\n  }\n\n  _mergeCss(cssText, style = {}) {\n    const cssParse = css.parse(cssText, { silent: true });\n\n    if (cssParse.stylesheet.parsingErrors.length) {\n      logger.error(\"源码错误: \" + cssParse.stylesheet.parsingErrors);\n      return {};\n    } else {\n      const cssObj = {};\n\n      cssParse.stylesheet.rules[0].declarations.map((item) => {\n        cssObj[item.property] = item.value;\n      });\n\n      Object.entries(style).map(([key, value]) => {\n        cssObj[key] = value;\n      });\n\n      return cssObj;\n    }\n  }\n\n  handleOnMouseOver(e) {\n    if (!this.refCanvas.contains(e.target)) {\n      this.currentHover = null;\n      return;\n    }\n\n    const { target } = e;\n    const { ctx } = this.props;\n    const fiberId = Object.keys(target).find((key) =>\n      key.startsWith(\"__reactFiber$\")\n    );\n\n    //todo: performance\n    // 这个判断是有问题的，用该存储 node.el 进行判断，但会影响性能\n    if (target == this.currentSelect) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    if (this.currentHover == target) {\n      return;\n    }\n\n    if (!fiberId || !this.refCanvas.contains(target)) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    const node = utils.getComponentNodeByFiberNode(\n      target[fiberId],\n      ctx.get(\"component\"),\n      ctx.get(\"dsl\").dsl.page\n    );\n\n    if (!node) {\n      this.refHoverGhost.setNode(null);\n      return;\n    }\n\n    this.refHoverGhost.setNode(node.el, node);\n    this.currentHover = target;\n  }\n\n  handleOnClickCapture(e) {\n    // 只处理画布渲染内的\n    if (!findDOMNode(this.refDesignRender).contains(e.target)) {\n      return;\n    }\n\n    e.stopPropagation();\n\n    if (this.draging) {\n      return;\n    }\n\n    const { target } = e;\n    const { ctx } = this.props;\n    const fiberId = Object.keys(target).find((key) =>\n      key.startsWith(\"__reactFiber$\")\n    );\n\n    if (this.currentSelect == target) {\n      return;\n    }\n\n    if (!fiberId || !this.refCanvas.contains(target)) {\n      this.refSelectGhost.setNode(null);\n      return;\n    }\n\n    const node = utils.getComponentNodeByFiberNode(\n      target[fiberId],\n      ctx.get(\"component\"),\n      ctx.get(\"dsl\").dsl.page\n    );\n\n    this.currentSelect = target;\n\n    if (!node) {\n      this.refSelectGhost.setNode(null);\n      return;\n    }\n\n    this.refSelectGhost.setNode(node);\n    this.refHoverGhost.setNode(null);\n  }\n\n  handleOnClick(e) {}\n\n  handleSelectGhostOnDragStart() {\n    this.draging = true;\n  }\n  handleSelectGhostOnDrag() {}\n  handleSelectGhostOnDragEnd(style, { dslInfo }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const cssObj = this._mergeCss(dslInfo.props.css, style);\n    this.draging = false;\n\n    dslManager.setPageDslProp(\n      \"css\",\n      `:root {${Object.keys(cssObj)\n        .map((name) => `${name}:${cssObj[name]}`)\n        .join(\";\")}}`,\n      dslInfo.id\n    );\n  }\n  handleSelectGhostOnDel({ dslInfo }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    dslManager.delPageDsl(dslInfo.id);\n    this.currentSelect = this.currentHover = null;\n  }\n\n  handleGetComponentInstance(ref) {\n    if (!ref?.props?.__id) {\n      return;\n    }\n    // todo: 删除sync\n    this.componentInstance.set(ref.props.__id, ref);\n  }\n\n  handleSelectGhostOnToZIndex({\n    currentId,\n    currentCss,\n    replaceId,\n    replaceCss,\n    value,\n    swapValue,\n  }) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    if (currentId == replaceId) {\n      return;\n    }\n\n    dslManager.setPageDslProp(\n      \"css\",\n      `:root {${Object.entries(this._mergeCss(currentCss, { \"z-index\": value }))\n        .map(([name, value]) => `${name}:${value}`)\n        .join(\";\")}}`,\n      currentId\n    );\n\n    replaceId &&\n      dslManager.setPageDslProp(\n        \"css\",\n        `:root {${Object.entries(\n          this._mergeCss(replaceCss, { \"z-index\": swapValue })\n        )\n          .map(([name, value]) => `${name}:${value}`)\n          .join(\";\")}}`,\n        replaceId\n      );\n  }\n\n  selectNodeById(id) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n\n    if (!this.componentInstance.get(id)) {\n      this.currentSelect = null;\n      return;\n    }\n\n    const node = {\n      el: findDOMNode(this.componentInstance.get(id)),\n      dslInfo: dslManager.getPageDSL(id),\n    };\n    node.componentInfo = component.get(node.dslInfo.componentName);\n    this.refSelectGhost.setNode(node);\n    this.currentSelect = node.el;\n    return node;\n  }\n\n  hoverNodeById(id) {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n    let el;\n\n    if (!this.componentInstance.get(id)) {\n      this.refHoverGhost.setNode(null);\n      this.currentHover = null;\n      return;\n    }\n\n    // 当 dsl 修改后\n    // react 重新渲染，导致 react 实例还没有挂载到 dom 上，导致报错\n    try {\n      el = findDOMNode(this.componentInstance.get(id));\n    } catch (error) {\n      return;\n    }\n\n    const node = {\n      el,\n      dslInfo: dslManager.getPageDSL(id),\n    };\n    node.componentInfo = component.get(node.dslInfo.componentName);\n    this.refHoverGhost.setNode(node.el, node);\n    this.currentHover = node.el;\n    return node;\n  }\n\n  handleOnMouseLeave() {\n    this.refHoverGhost.setNode(null);\n  }\n\n  render() {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n    const component = ctx.get(\"component\");\n\n    logger.log(\"render\");\n\n    return (\n      // 实现空边距截图效果，所以外面包了一层\n      <div>\n        <div\n          className=\"panel-canvas-absolute\"\n          id={this.containerId}\n          onClickCapture={this.handleOnClickCapture}\n          onClick={this.handleOnClick}\n          onDragOver={this.handleOnDragOver}\n          onDrop={this.handleOnDrop}\n          onMouseLeave={this.handleOnMouseLeave}\n          ref={(_) => (this.refCanvas = _)}\n        >\n          {/* {!children ? <div className=\"panel-canvas-empty-block\"></div> : null} */}\n          <SelectGhost\n            ref={(_) => (this.refSelectGhost = _)}\n            canvasDomId={this.containerId}\n            ctx={ctx}\n            canResize\n            onDragStart={this.handleSelectGhostOnDragStart}\n            onDragEnd={this.handleSelectGhostOnDragEnd}\n            onDel={this.handleSelectGhostOnDel}\n            onToTop={this.handleSelectGhostOnToZIndex}\n            onToBottom={this.handleSelectGhostOnToZIndex}\n          />\n          <HoverGhost ref={(_) => (this.refHoverGhost = _)} />\n\n          {/* todo: 处理 给el自动加 absolute ，需要给 dsl 自动加这个属性\n        如果有 transition 的el，是否要给它覆盖 还是怎样？\n        */}\n          <DesignRender\n            ref={(_) => (this.refDesignRender = _)}\n            className=\"panel-canvas-absolute-render\"\n            dsl={dslManager.dsl.page}\n            component={component}\n            style={{ height: \"100%\" }}\n            getComponentInstance={this.handleGetComponentInstance}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelCanvasAbsolute);\n","import React from \"react\";\nimport { Button, InputNumber } from \"antd\";\nimport { SwapOutlined } from \"@ant-design/icons\";\n\nimport \"antd/lib/button/style/index.css\";\nimport \"antd/lib/input-number/style/index.css\";\n\nclass PanelResizeCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      // d2 size\n      x: 600,\n      y: 400,\n    };\n  }\n\n  componentDidMount() {\n    const { x, y } = this.state;\n    setTimeout(() => {\n      this.changeDomSize(x, y);\n    });\n  }\n\n  handleOnChange(name, value) {\n    this.setState({ [name]: value }, () => {\n      const { x, y } = this.state;\n      this.changeDomSize(x, y);\n    });\n  }\n\n  changeDomSize(x, y) {\n    const { ctx } = this.props;\n    const canvasDOM = document.getElementById(ctx.get(\"canvas\").containerId);\n\n    canvasDOM.style.width = x + \"px\";\n    canvasDOM.style.height = y + \"px\";\n  }\n\n  render() {\n    const { x, y } = this.state;\n    //\n    return (\n      <div>\n        <InputNumber\n          size=\"small\"\n          value={x}\n          onChange={(value) => this.handleOnChange(\"x\", value)}\n        />\n        &nbsp;x&nbsp;\n        <InputNumber\n          size=\"small\"\n          value={y}\n          onChange={(value) => this.handleOnChange(\"y\", value)}\n        />\n        <Button\n          type=\"text\"\n          icon={<SwapOutlined />}\n          onClick={() => {\n            this.setState(\n              {\n                x: y,\n                y: x,\n              },\n              () => {\n                const { x, y } = this.state;\n                this.changeDomSize(x, y);\n              }\n            );\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default PanelResizeCanvas;\n","export default __webpack_public_path__ + \"static/media/page.f2be2014.svg\";","export default __webpack_public_path__ + \"static/media/group.f35c57f1.svg\";","export default __webpack_public_path__ + \"static/media/link.98c02ce7.svg\";","import React from \"react\";\nimport svgPage from \"./static/page.svg\";\nimport svgGroup from \"./static/group.svg\";\nimport svgLink from \"./static/link.svg\";\nimport \"./TreeNode.css\";\n\nexport default class TreeNode extends React.Component {\n  static defaultProps = {\n    type: \"page\",\n    title: \"\",\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  renderIcon() {\n    if (this.props.renderIcon) {\n      return this.props.renderIcon(this.props.type, this.props);\n    }\n\n    const getSvg = {\n      page: svgPage,\n      group: svgGroup,\n      link: svgLink,\n    };\n\n    return getSvg[this.props.type] ? (\n      <img\n        className=\"lp-react-tree-drag-TreeNode-icon\"\n        src={getSvg[this.props.type]}\n      />\n    ) : null;\n  }\n\n  renderTitle() {\n    if (this.props.renderTitle) {\n      return this.props.renderTitle(this.props.title, this.props);\n    }\n\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode-title\"\n        data-__lp_tree_node_id={this.props.id}\n      >\n        {this.props.renderTitle\n          ? this.props.renderTitle(this.props.title, this.props)\n          : this.props.title}\n      </div>\n    );\n  }\n\n  renderOp() {\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode-op\"\n        data-__lp_tree_node_id={this.props.id}\n      >\n        {this.props.renderOp ? this.props.renderOp(this.props) : null}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div\n        className=\"lp-react-tree-drag-TreeNode\"\n        onDragStart={(e) => {\n          const dom = e.currentTarget;\n          dom.classList.add(\"lp-react-tree-drag-TreeNode-dragStart\");\n          this.props.onTreeNodeDragStart && this.props.onTreeNodeDragStart(e);\n        }}\n        onDragEnd={(e) => {\n          const dom = e.currentTarget;\n          dom.classList.remove(\"lp-react-tree-drag-TreeNode-dragStart\");\n          this.props.onTreeNodeDragEnd && this.props.onTreeNodeDragEnd(e);\n        }}\n        onDragOver={(e) => e.preventDefault()}\n        data-__lp_tree_node_id={this.props.id}\n      >\n        <div\n          className=\"lp-react-tree-drag-TreeNode-left\"\n          draggable\n          data-__lp_tree_node_id={this.props.id}\n        >\n          {this.renderIcon()}\n          {this.renderTitle()}\n        </div>\n        {this.renderOp()}\n      </div>\n    );\n  }\n}\n","export default __webpack_public_path__ + \"static/media/arrow.5e646b37.svg\";","import React from \"react\";\nimport { get } from \"lodash\";\nimport classnames from \"classnames\";\nimport TreeNode from \"./TreeNode.jsx\";\nimport svgArrow from \"./static/arrow.svg\";\nimport \"./TreeGroup.css\";\n\nexport default class TreeGroup extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      expanded: false,\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      expanded: this.props.expanded,\n    });\n  }\n\n  render() {\n    const { children, expandedAll, showLine } = this.props;\n    const { expanded } = this.state;\n    return (\n      <div\n        className={classnames(\"lp-react-tree-drag-TreeGroup\", {\n          \"lp-react-tree-drag-TreeGroup-collapse\": !expanded,\n        })}\n        onDragOver={(e) => {\n          e.currentTarget.lastChild.lastChild.classList.add(\n            \"lp-react-tree-drag-TreeGroup-enter\"\n          );\n          e.stopPropagation();\n          e.preventDefault();\n        }}\n        onDragLeave={(e) => {\n          e.currentTarget.lastChild.lastChild.classList.remove(\n            \"lp-react-tree-drag-TreeGroup-enter\"\n          );\n        }}\n      >\n        <img\n          className=\"lp-react-tree-drag-TreeGroup-arrow\"\n          src={svgArrow}\n          onClick={() =>\n            this.setState({\n              expanded: !expanded,\n            })\n          }\n        />\n        <div className=\"lp-react-tree-drag-TreeGroup-node\">\n          <TreeNode\n            {...this.props}\n            onTreeNodeDragStart={(e) => {\n              this.setState({\n                expanded: false,\n              });\n            }}\n            onTreeNodeDragEnd={(e) => {\n              this.setState({\n                expanded: true,\n              });\n            }}\n          />\n          <div\n            className={classnames(\"lp-react-tree-drag-TreeGroup-node-ch\", {\n              \"lp-react-tree-drag-TreeGroup-node-ch-line\": showLine,\n            })}\n          >\n            {(children || []).map((node, key) =>\n              node.type == \"group\" ? (\n                <TreeGroup\n                  key={key}\n                  {...node}\n                  item={node}\n                  expanded={expandedAll ? true : node.expanded}\n                  expandedAll={expandedAll}\n                  showLine={showLine}\n                />\n              ) : (\n                <TreeNode {...node} item={node} key={key} />\n              )\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","export function addObjecKey(obj, key, value) {\n  if (Object.prototype.toString.call(obj) != \"[object Object]\") {\n    return;\n  }\n\n  obj[key] =\n    Object.prototype.toString.call(value) == \"[object Function]\"\n      ? value()\n      : value;\n\n  Array.isArray(obj.children) &&\n    obj.children.map((_obj) => addObjecKey(_obj, key, value));\n\n  return obj;\n}\n\nexport function getNodeById(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeById(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function getNodeByIdAndDel(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      data.splice(i, 1);\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeByIdAndDel(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function getNodeByIdAndMarkNext(data, id) {\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      data[i] = \"next\";\n      return item;\n    }\n\n    if (Array.isArray(item.children)) {\n      let value = getNodeById(item.children, id);\n      if (value) {\n        return value;\n      }\n    }\n  }\n}\n\nexport function setNodeByIdAndInsert(data, id, value, type) {\n  if (!value) {\n    return data;\n  }\n\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item.id == id) {\n      if (type == \"insertBefore\") {\n        data.splice(i, 0, value);\n      } else if (type == \"appendAfter\") {\n        data.splice(i + 1, 0, value);\n      } else if (type == \"appendChild\") {\n        if (data[i].children) {\n          data[i].children.push(value);\n        } else {\n          data[i].children = [value];\n        }\n      }\n\n      break;\n    }\n\n    if (Array.isArray(item.children)) {\n      setNodeByIdAndInsert(item.children, id, value, type);\n    }\n  }\n}\n\nexport function setNodeByNext(data, value) {\n  if (!value) {\n    return data;\n  }\n\n  for (let i = 0; i < data.length; i++) {\n    let item = data[i];\n    if (item == \"next\") {\n      data[i] = value;\n\n      break;\n    }\n\n    // if (Array.isArray(item.children)) {\n    //   let value = setNodeById(item.children, id);\n    //   if (value) {\n    //     break;\n    //   }\n    // }\n  }\n\n  return data;\n}\n","import React from \"react\";\nimport ReactDom from \"react-dom\";\nimport { cloneDeep } from \"lodash\";\n\nimport TreeGroup from \"./TreeGroup.jsx\";\nimport TreeNode from \"./TreeNode.jsx\";\nimport { addObjecKey, getNodeByIdAndDel, setNodeByIdAndInsert } from \"./utils\";\nimport \"./Tree.css\";\n\nexport default class Tree extends React.Component {\n  static defaultProps = {\n    data: [],\n    expandedAll: false,\n    showLine: false,\n    key: Date.now(),\n    onHover: () => null,\n    onChange: () => null,\n    onClick: () => null,\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      expandedAll: false,\n      showLine: false,\n    };\n    this.dragEnterIndex =\n      this.dragEnterDOM =\n      this.dragPlaceholderIndex =\n      this.refDragPlaceholder =\n      this.data =\n      this.hoverItem =\n      this.isDraging =\n        null;\n  }\n\n  componentDidMount() {\n    this.setState({\n      data: this.props.data,\n      expandedAll: this.props.expandedAll,\n      showLine: this.props.showLine,\n    });\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    if (nextProps.data != this.props.data) {\n      this.setState({ data: nextProps.data });\n    }\n  }\n\n  onHover({ target }) {\n    if (this.isDraging) {\n      return;\n    }\n    const { data } = this.state;\n    const id = target?.dataset[\"__lp_tree_node_id\"];\n    if (this.hoverItem == id) {\n      return;\n    }\n\n    this.hoverItem = id;\n\n    for (let index = 0; index < data?.length; index++) {\n      const item = data[index];\n\n      if (item.id == id) {\n        this.props?.onHover(item);\n        return;\n      }\n    }\n\n    this.props?.onHover({});\n  }\n\n  onClick({ target }) {\n    const { data } = this.state;\n    const id = target?.dataset[\"__lp_tree_node_id\"];\n    for (let index = 0; index < data?.length; index++) {\n      const item = data[index];\n\n      if (item.id == id) {\n        this.props?.onClick(item);\n        return;\n      }\n    }\n  }\n\n  render() {\n    const { data, expandedAll, showLine, key } = this.state;\n    const { onChange } = this.props;\n\n    return (\n      <div\n        key={key}\n        className=\"lp-react-tree-drag-Tree\"\n        onDrag={(e) => {\n          if (!this.dragEnterDOM) {\n            return;\n          }\n\n          // 可插入节点的父级容器\n          const elParent =\n            this.dragEnterDOM.parentElement.className ==\n            \"lp-react-tree-drag-TreeGroup-node\"\n              ? this.dragEnterDOM.parentElement.lastElementChild // group则取child容器\n              : this.dragEnterDOM.parentElement;\n\n          // 接收元素的实际位置\n          const { top: enterElTop, height: enterElHeight } =\n            this.dragEnterDOM.getBoundingClientRect();\n\n          // 如果是group的底部，是否在边界区域\n          if (\n            [...this.dragEnterDOM.classList].includes(\n              \"lp-react-tree-drag-TreeGroup-node-ch\"\n            )\n          ) {\n            if (\n              e.clientY < enterElTop + enterElHeight &&\n              e.clientY > enterElTop + enterElHeight - 5\n            ) {\n              this.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.parentElement.parentElement.nextElementSibling\n              );\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                getNodeByIdAndDel(this.data, this.dragPlaceholderIndex),\n                \"appendAfter\"\n              );\n            }\n            return;\n          }\n\n          // 通过id取 拖动元素的实际值，并从对象上删除这个id key\n          const placeholderData = getNodeByIdAndDel(\n            this.data,\n            this.dragPlaceholderIndex\n          );\n\n          if (e.clientY < enterElTop + enterElHeight / 2) {\n            // 在接收元素的上面\n            if (\n              this.dragEnterDOM.parentElement.className ==\n              \"lp-react-tree-drag-TreeGroup-node\" // 如果接收元素是 group 节点\n            ) {\n              this.dragEnterDOM.parentElement.parentElement.parentElement.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.parentElement.parentElement\n              );\n            } else {\n              elParent.insertBefore(this.refDragPlaceholder, this.dragEnterDOM);\n            }\n            setNodeByIdAndInsert(\n              this.data,\n              this.dragEnterIndex,\n              placeholderData,\n              \"insertBefore\"\n            );\n          } else {\n            // 在接收元素的下面\n            if (\n              this.dragEnterDOM.parentElement.className ==\n              \"lp-react-tree-drag-TreeGroup-node\" // 如果接收元素是 group 节点\n            ) {\n              // 当前点的children追加\n              elParent.appendChild(this.refDragPlaceholder);\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                placeholderData,\n                \"appendChild\"\n              );\n            } else {\n              elParent.insertBefore(\n                this.refDragPlaceholder,\n                this.dragEnterDOM.nextElementSibling\n              );\n              setNodeByIdAndInsert(\n                this.data,\n                this.dragEnterIndex,\n                placeholderData,\n                \"appendAfter\"\n              );\n            }\n          }\n\n          this.dragEnterDOM = null;\n        }}\n        onDragStart={(e) => {\n          this.dragPlaceholderIndex = e.target.dataset.__lp_tree_node_id;\n          this.data = cloneDeep(data);\n          this.isDraging = true;\n        }}\n        onDragEnd={(e) => {\n          this.dragEnterDOM = null;\n          this.refDragPlaceholder.style.display = \"none\";\n          this.setState({\n            data: this.data,\n            key: Date.now(),\n          });\n          JSON.stringify(this.data) != JSON.stringify(this.state.data) &&\n            onChange?.(this.data);\n          setTimeout(() => (this.isDraging = false), 100);\n        }}\n        onDragEnter={(e) => {\n          // 是否是可接收的节点\n          if (\n            e.target.className == \"lp-react-tree-drag-TreeNode\" &&\n            e.target.firstElementChild.dataset.__lp_tree_node_id\n          ) {\n            this.dragEnterIndex =\n              e.target.firstElementChild.dataset.__lp_tree_node_id;\n            this.dragEnterDOM = e.target;\n          } else if (\n            [...e.target.classList].includes(\n              \"lp-react-tree-drag-TreeGroup-node-ch\"\n            )\n          ) {\n            this.dragEnterIndex =\n              e.target.parentElement.firstElementChild.firstElementChild.dataset.__lp_tree_node_id;\n            this.dragEnterDOM = e.target;\n          } else {\n            return;\n          }\n\n          // 显示占位符\n          this.refDragPlaceholder.style.display = \"block\";\n\n          if (\n            this.dragEnterDOM.parentElement.className ==\n            \"lp-react-tree-drag-TreeGroup-node\"\n          ) {\n            this.dragEnterDOM.parentElement.parentElement.classList.remove(\n              \"lp-react-tree-drag-TreeGroup-collapse\"\n            );\n          }\n\n          // 拖拽 和 接收的 是否是同一个元素，或者不合格的元素\n          if (\n            this.dragEnterIndex == this.dragPlaceholderIndex ||\n            !this.dragEnterIndex\n          ) {\n            return;\n          }\n        }}\n        onDragOver={(e) => e.preventDefault()}\n        onMouseOver={(e) => this.onHover(e)}\n        onMouseLeave={(e) => this.onHover({})}\n        onClick={(e) => this.onClick(e)}\n      >\n        {(data || []).map((node, key) =>\n          node.type == \"group\" ? (\n            <TreeGroup\n              key={key}\n              {...node}\n              item={node}\n              expanded={expandedAll ? true : node.expanded}\n              expandedAll={expandedAll}\n              showLine={showLine}\n            />\n          ) : (\n            <TreeNode {...node} item={node} key={key} />\n          )\n        )}\n        <div\n          className=\"lp-react-tree-drag-TreeNode-placeholder\"\n          ref={(r) => (this.refDragPlaceholder = ReactDom.findDOMNode(r))}\n        ></div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport { observer } from \"mobx-react\";\nimport { debounce } from \"lodash\";\nimport Logger from \"lp-logger\";\nimport Tree from \"./compoents/Tree\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelOutline\",\n  level: \"error\",\n});\n\nexport default observer(\n  class extends React.Component {\n    constructor(props) {\n      super(props);\n\n      // 防止 setDSL 后，ref 没有挂载完成\n      this.onHover = debounce(this.onHover.bind(this), 300);\n    }\n\n    onHover(item) {\n      const { ctx } = this.props;\n      const canvas = ctx.get(\"canvas\");\n\n      canvas.hoverNodeById(item.id);\n    }\n\n    render() {\n      const { ctx } = this.props;\n      const dslManager = ctx.get(\"dsl\");\n      const canvas = ctx.get(\"canvas\");\n\n      logger.log(\"render\");\n\n      return (\n        <div className=\"panel-outline\">\n          <Tree\n            onHover={this.onHover}\n            onClick={(item) => {\n              canvas.selectNodeById(item.id);\n            }}\n            onChange={(data) => {\n              const pageDsl = data.map((item, index, arr) => {\n                const { title, props, ...other } = item;\n\n                return {\n                  ...other,\n                  props: {\n                    ...props,\n                    css: setZIndex(props.css, arr.length - index - 1),\n                  },\n                };\n              });\n\n              dslManager.setDSL({ page: pageDsl });\n            }}\n            data={dslManager.dsl.page\n              .slice()\n              .sort((a, b) => -getZIndex(a.props.css) + getZIndex(b.props.css))\n              .map((item) => ({\n                ...item,\n                title: item.componentName,\n              }))}\n          />\n        </div>\n      );\n    }\n  }\n);\n\nfunction setZIndex(str, value) {\n  return str.replace(/z-index:\\s*(-?\\d+?)/, `z-index:${value}`);\n}\n\nfunction getZIndex(str) {\n  return Number(str.match(/z-index:\\s*(-?\\d+?)/)?.[1]);\n}\n","import React from \"react\";\nimport { Input } from \"antd\";\n\nexport default class extends React.Component {\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e.target.value);\n  }\n\n  render() {\n    const { value, setValue, ...otherProps } = this.props;\n\n    return (\n      <Input value={value} onChange={(e) => this.onChange(e)} {...otherProps} />\n    );\n  }\n}\n","import React from \"react\";\nimport { Select } from \"antd\";\n\nexport default class extends React.Component {\n  static defaultProps = {\n    dataSource: [],\n  };\n\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e);\n  }\n\n  render() {\n    const { value, setValue, dataSource, ...otherProps } = this.props;\n\n    return (\n      <Select\n        value={value}\n        onChange={(e) => this.onChange(e)}\n        style={{ width: \"100%\" }}\n        {...otherProps}\n      >\n        {dataSource.map((item, key) => (\n          <Select.Option value={item.value} key={key}>\n            {item.title}\n          </Select.Option>\n        ))}\n      </Select>\n    );\n  }\n}\n","import TextSetter from \"./TextSetter\";\nimport SelectSetter from \"./SelectSetter\";\n\nexport default {\n  TextSetter,\n  SelectSetter,\n};\n","import React from \"react\";\nimport { Button, Input, Upload } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e.target.value);\n  }\n\n  uploadOnChange(file) {\n    const { setValue } = this.props;\n\n    setValue(URL.createObjectURL(file));\n    return false;\n  }\n\n  render() {\n    const { value, setValue, ...otherProps } = this.props;\n\n    return (\n      <div style={{ display: \"flex\" }}>\n        <Input value={value} onChange={(e) => this.onChange(e)} />\n        <Upload\n          showUploadList={false}\n          beforeUpload={(file) => this.uploadOnChange(file)}\n        >\n          <Button icon={<UploadOutlined />}></Button>\n        </Upload>\n      </div>\n    );\n  }\n}\n","import view from \"./view\";\n\nexport default view;\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./view.less\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { className, url, width } = this.props;\n    return (\n      <img\n        className={classnames(className, \"banner-picture\")}\n        src={url}\n      />\n    );\n  }\n}\n","import Setters from \"./../../PropSetters\";\nimport UploaderSetter from \"./setter.uploader\";\nimport view from \"./designView\";\n\nexport default {\n  title: \"图片\",\n  componentName: \"Picture\",\n  category: \"基础\",\n  icon: (\n    <svg\n      t=\"1636864133288\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"2739\"\n      width=\"128\"\n      height=\"128\"\n    >\n      <path\n        d=\"M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z\"\n        p-id=\"2740\"\n      ></path>\n    </svg>\n  ),\n  view: view,\n  canOperate: true,\n  hidden: false,\n  props: [\n    {\n      name: \"url\",\n      title: \"地址\",\n      description: \"\",\n      supportVariable: true,\n      value:\n        \"https://img.alicdn.com/imgextra/i3/O1CN01sqfGyy1wf1PLUCJ8z_!!6000000006334-55-tps-120-120.svg\",\n      setter: <UploaderSetter />,\n      // display: \"none\",\n    },\n    // {\n    //   name: \"width\",\n    //   title: \"宽\",\n    //   description: \"\",\n    //   supportVariable: true,\n    //   value: \"100%\",\n    //   setter: <Setters.TextSetter />,\n    // },\n    {\n      name: \"css\",\n      value: \":root{width: 50%}\",\n      display: \"none\",\n    },\n  ],\n};\n","import view from \"./view\";\n\nexport default view;\n","import React from \"react\";\nimport { Button, Input, Upload } from \"antd\";\nimport { UploadOutlined } from \"@ant-design/icons\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  onChange(e) {\n    const { setValue } = this.props;\n\n    setValue(e.target.value);\n  }\n\n  uploadOnChange(file) {\n    const { setValue } = this.props;\n\n    setValue(URL.createObjectURL(file));\n    return false;\n  }\n\n  render() {\n    const { value, setValue, ...otherProps } = this.props;\n\n    return (\n      <div style={{ display: \"flex\" }}>\n        <Input value={value} onChange={(e) => this.onChange(e)} />\n        <Upload\n          showUploadList={false}\n          beforeUpload={(file) => this.uploadOnChange(file)}\n        >\n          <Button icon={<UploadOutlined />}></Button>\n        </Upload>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport classnames from \"classnames\";\n\nimport \"./view.less\";\n\nexport default class extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    const { className, type } = this.props;\n\n    const typeMap = {\n      jx: \"https://img.alicdn.com/imgextra/i2/O1CN01Fe2s271gk1t3ZbnNi_!!6000000004179-2-tps-1192-720.png\",\n      d2: \"https://img.alicdn.com/imgextra/i2/O1CN01FYoKj91X6nPwFoAvK_!!6000000002875-2-tps-601-105.png\",\n    };\n\n    return (\n      <img\n        className={classnames(className, \"banner-picture\")}\n        src={typeMap[type]}\n      />\n    );\n  }\n}\n","import Picture from \"./Picture/attribute\";\nimport Logo from \"./Logo/attribute\";\n\nexport default [Picture, Logo];\n","import Setters from \"./../../PropSetters\";\nimport UploaderSetter from \"./setter.uploader\";\nimport view from \"./designView\";\n\nexport default {\n  title: \"Logo\",\n  componentName: \"Logo\",\n  category: \"基础\",\n  icon: (\n    <svg\n      t=\"1639665991757\"\n      viewBox=\"0 0 1024 1024\"\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"7480\"\n      width=\"128\"\n      height=\"128\"\n    >\n      <path\n        d=\"M810.666667 469.333333H469.333333v255.786667h341.333334V469.333333z m170.666666 341.333334V212.48C981.333333 165.546667 942.933333 128 896 128H128C81.066667 128 42.666667 165.546667 42.666667 212.48V810.666667c0 46.933333 38.4 85.333333 85.333333 85.333333h768c46.933333 0 85.333333-38.4 85.333333-85.333333z m-85.333333 0.853333H128V212.053333h768v599.466667z\"\n        p-id=\"7481\"\n      ></path>\n    </svg>\n  ),\n  view: view,\n  canOperate: true,\n  hidden: false,\n  props: [\n    // {\n    //   name: \"url\",\n    //   title: \"地址\",\n    //   description: \"\",\n    //   supportVariable: true,\n    //   value:\n    //     \"https://img.alicdn.com/imgextra/i2/O1CN01Fe2s271gk1t3ZbnNi_!!6000000004179-2-tps-1192-720.png\",\n    //   setter: <UploaderSetter />,\n    //   // display: \"none\",\n    // },\n    {\n      name: \"type\",\n      title: \"类型\",\n      description: \"\",\n      supportVariable: true,\n      value: \"jx\",\n      setter: (\n        <Setters.SelectSetter\n          dataSource={[\n            { title: \"精心\", value: \"jx\" },\n            { title: \"D2\", value: \"d2\" },\n            ,\n          ]}\n        />\n      ),\n    },\n    {\n      name: \"css\",\n      value: \":root{width: 129px}\",\n      display: \"none\",\n    },\n  ],\n};\n","import React from \"react\";\nimport Logger from \"lp-logger\";\nimport MonacoEditor from \"react-monaco-editor\";\nimport { observer } from \"mobx-react\";\n\nimport \"./index.less\";\n\nconst logger = new Logger({\n  name: \"le-PanelDSL\",\n  level: \"error\",\n});\n\nclass PanelDSL extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {};\n  }\n\n  componentDidMount() {}\n\n  render() {\n    const { ctx } = this.props;\n    const dslManager = ctx.get(\"dsl\");\n\n    logger.log(\"render\");\n\n    return (\n      <div className=\"panel-dsl\">\n        <MonacoEditor\n          language=\"json\"\n          value={JSON.stringify(dslManager.dsl, null, 2)}\n          // onChange={this.onChange}\n        />\n      </div>\n    );\n  }\n}\n\nexport default observer(PanelDSL);\n","import events from \"events\";\n\nclass SingleEventBus {\n  constructor() {\n    this.event = new events();\n  }\n\n  getEvent() {\n    return this.event;\n  }\n\n  emit(eventName, ...args) {\n    return this.event.emit(eventName, ...args);\n  }\n\n  on(eventName, callback) {\n    this.event.on(eventName, callback);\n    return () => {\n      this.event.removeListener(eventName, callback);\n    };\n  }\n\n  off(eventName, callback) {\n    return callback\n      ? this.event.removeListener(eventName, callback)\n      : this.event.removeAllListeners(eventName);\n  }\n}\n\nexport default new SingleEventBus();\n","import React from \"react\";\nimport DSL from \"./store\";\nimport Skeleton from \"./components/Skeleton\";\nimport PanelGenImg from \"./components/PanelGenImg\";\nimport PanelAbout from \"./components/PanelAbout\";\nimport PanelTpl from \"./components/PanelTpl\";\nimport PanelLogo from \"./components/PanelLogo\";\nimport PanelComponent from \"./components/PanelComponent\";\nimport PanelAttribute from \"./components/PanelAttribute\";\nimport PanelCanvasAbsolute from \"./components/PanelCanvasAbsolute\";\nimport PanelResizeCanvas from \"./components/PanelResizeCanvas\";\nimport PanelOutline from \"./components/PanelOutline\";\nimport components from \"./components/ComponentBanner\";\nimport PanelDSL from \"./components/PanelDSL\";\nimport event from \"./utils/SingleEventBus\";\n\nconst ctx = new Map();\nwindow.__ctx = ctx;\n\n// ctx event\nctx.set(\"event\", event);\n\n// ctx component\nctx.set(\"component\", new Map());\ncomponents.map((item) => {\n  ctx.get(\"component\").set(item.componentName, item);\n});\n\n// ctx dsl\nconst dslInstance = new DSL({\n  page: [\n    {\n      id: \"Picture_xJ27Wh9O3muw6haQPoKsO\",\n      componentName: \"Picture\",\n      props: {\n        url: \"https://img.alicdn.com/imgextra/i3/O1CN01oNV2HE1wltLn3iEtB_!!6000000006349-55-tps-300-200.svg\",\n        css: \":root {width:100%;z-index:0;left:0px;top:0px}\",\n      },\n    },\n    {\n      id: \"Logo_pQj-9HV36c7jzCq-gDafJ\",\n      componentName: \"Logo\",\n      props: {\n        type: \"jx\",\n        css: \":root {width:129px;z-index:1;left:471px;top:322px}\",\n      },\n    },\n  ],\n});\nctx.set(\"dsl\", dslInstance);\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  componentDidMount() {\n    ctx.get(\"skeleton\").openDockByName(\"component\");\n  }\n\n  render() {\n    return (\n      <div className=\"app\">\n        <Skeleton\n          ctx={ctx}\n          topArea={[\n            {\n              content: <PanelLogo />,\n            },\n            {\n              align: \"right\",\n              content: <PanelGenImg />,\n            },\n            {\n              align: \"center\",\n              content: <PanelResizeCanvas />,\n            },\n            {\n              align: \"right\",\n              content: <PanelTpl />,\n            },\n            {\n              align: \"right\",\n              content: <PanelAbout />,\n            },\n          ]}\n          leftArea={[\n            {\n              name: \"component\",\n              title: \"组件面板\",\n              icon: \"https://img.alicdn.com/imgextra/i2/O1CN01SpaA3D1dJ3gIsZltR_!!6000000003714-2-tps-128-128.png\",\n              content: <PanelComponent />,\n            },\n            {\n              name: \"outline\",\n              title: \"大纲面板\",\n              hidden: false,\n              icon: \"https://img.alicdn.com/imgextra/i1/O1CN01ED4RnW1OVgMdOEZkH_!!6000000001711-2-tps-128-128.png\",\n              content: <PanelOutline />,\n            },\n            {\n              name: \"dsl\",\n              title: \"源码\",\n              align: \"bottom\",\n              icon: \"https://img.alicdn.com/imgextra/i3/O1CN01liE81S23dpeqriifl_!!6000000007279-2-tps-128-128.png\",\n              content: <PanelDSL />,\n              width: \"500px\",\n              boxType: \"float\",\n            },\n          ]}\n          centerArea={[\n            {\n              content: <PanelCanvasAbsolute />,\n            },\n          ]}\n          rightArea={[\n            {\n              content: <PanelAttribute />,\n            },\n          ]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./app\";\nimport \"./index.less\";\n\n// 还有一块错误的收集\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}